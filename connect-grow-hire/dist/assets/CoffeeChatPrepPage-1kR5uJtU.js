import{r as i,j as e,W as b,Y as pe,$ as y,a3 as D,ay as f,ax as ge,K as je,a0 as M,a1 as H,a2 as O,a4 as Y,b as ke}from"./vendor-react-8__hEqSi.js";import{a as Le,B as x,f as $,t as o}from"./index-CbRDpcOQ.js";import{S as Fe,A as Te,a as Ae}from"./AppSidebar-C3T1EY_x.js";import{C as S,a as Ne,b as be,c as k}from"./card-DEr-NLBm.js";import{I as ye}from"./input-Da8vUUVy.js";import{T as we,a as ve,b as I,c as L}from"./tabs-Dj1cUU_Y.js";import{B as Ce}from"./badge-C0HCK_nH.js";import{L as Ie,B as Pe}from"./LockedFeatureOverlay-oCx9KArl.js";import{a as w}from"./api-BG-uyxl1.js";import{C as p}from"./constants-CpKbYGZX.js";import{d as Re,l as Ee}from"./activityLogger-BZL1Xx2P.js";import{P as Ue}from"./PageHeaderActions-j8WjX7Tv.js";import"./vendor-3c7QqsrR.js";import"./vendor-firebase-fqjS7TZQ.js";import"./avatar-CmaKgUkD.js";import"./firebaseApi-BFL2T2zL.js";const es=()=>{var se,te,ae,re,le,ie,ne,ce,de,oe,me,xe;const{user:g,checkCredits:R}=Le(),F=g||{credits:0,tier:"free"},[j,K]=i.useState(""),[u,E]=i.useState(!1),[W,T]=i.useState(""),[P,X]=i.useState(null),[a,V]=i.useState(null),[c,U]=i.useState("idle"),[Ge,J]=i.useState(0),G=i.useRef(null),[v,_]=i.useState([]),[z,De]=i.useState(!0),[C,Q]=i.useState(null);i.useEffect(()=>()=>{G.current&&(clearTimeout(G.current),G.current=null)},[]),i.useEffect(()=>{(async()=>{try{const t=await w.getAllCoffeeChatPreps();if("error"in t)throw new Error(t.error);_(t.preps||[])}catch(t){console.error("Failed to load coffee chat preps:",t),o({title:"Unable to load library",description:t instanceof Error?t.message:"Please try again.",variant:"destructive"})}finally{De(!1)}})()},[]),i.useEffect(()=>{c==="completed"&&P&&(async()=>{try{const t=await w.getAllCoffeeChatPreps();if("error"in t)return;_(t.preps||[])}catch{}})()},[c,P]);const Z=async()=>{if(!j.trim()){o({title:"Missing LinkedIn URL",description:"Please enter a LinkedIn profile URL.",variant:"destructive"});return}if(!g){o({title:"Authentication Required",description:"Please sign in to continue.",variant:"destructive"});return}if((F.credits??0)<p){o({title:"Insufficient Credits",description:`You need ${p} credits to generate a coffee chat prep.`,variant:"destructive"});return}E(!0),U("processing"),T("Starting Coffee Chat Prep..."),V(null),J(s=>s+1);try{const s=await w.createCoffeeChatPrep({linkedinUrl:j});if("error"in s)throw new Error(s.error);const t=s.prepId;X(t);let d=0;const A=200;await new Promise((he,r)=>{const m=setInterval(async()=>{d++;try{const n=await w.getCoffeeChatPrepStatus(t);if("error"in n&&!("status"in n)){clearInterval(m),r(new Error(n.error));return}if(n.pdfUrl){if(clearInterval(m),g!=null&&g.uid&&n.contactData)try{const h=n.contactData,ue=h.name||`${h.firstName||""} ${h.lastName||""}`.trim()||"",fe=h.company||h.companyName||"",Se=Re({contactName:ue||void 0,company:fe||void 0});await Ee(g.uid,"coffeePrep",Se,{prepId:t,linkedinUrl:j,contactName:ue||"",company:fe||""})}catch(h){console.error("Failed to log coffee chat prep activity:",h)}ke.flushSync(()=>{E(!1),U("completed"),T("Coffee Chat Prep ready!"),V(n),X(n.id||t),J(h=>h+1)}),o({title:"Coffee Chat Prep Ready!",description:"Your one-pager has been generated successfully.",duration:5e3}),R==null||R(),he(n);return}"status"in n&&T("Processing your request..."),d>=A&&(clearInterval(m),r(new Error("Generation timed out")))}catch(n){clearInterval(m),r(n)}},3e3)})}catch(s){console.error("Coffee chat prep failed:",s),U("failed"),T("Generation failed"),o({title:"Generation Failed",description:s.message||"Please try again.",variant:"destructive"})}finally{E(!1)}},ee=async s=>{const t=P;if(!(!t||!g))try{let N;o({title:"Preparing PDF",description:"Please wait while we prepare your Coffee Chat PDF...",duration:3e3});for(let r=0;r<20;r++){try{const m=await w.downloadCoffeeChatPDF(t);if(N=(m==null?void 0:m.pdfUrl)||void 0,N&&(await fetch(N,{method:"HEAD"})).ok)break}catch{}await new Promise(m=>setTimeout(m,1e3))}if(!N)throw new Error("PDF isn't ready yet. Please try again in a moment.");if(await new Promise(r=>setTimeout(r,500)),!window.open(N,"_blank","noopener,noreferrer")){const r=document.createElement("a");r.href=N,r.target="_blank",r.rel="noopener noreferrer",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}o({title:"PDF Ready",description:"Opened your Coffee Chat one-pager in a new tab."})}catch(d){o({title:"Download Failed",description:d instanceof Error?d.message:"Could not download the PDF.",variant:"destructive"})}},B=async s=>{try{if(s.pdfUrl){window.open(s.pdfUrl,"_blank","noopener");return}const{pdfUrl:t}=await w.downloadCoffeeChatPDF(s.id);if(t)window.open(t,"_blank","noopener");else throw new Error("PDF URL not available yet")}catch{o({title:"Download failed",description:"Could not open the PDF. Please try again.",variant:"destructive"})}},q=async s=>{Q(s);try{const t=await w.deleteCoffeeChatPrep(s);if("error"in t)throw new Error(t.error);_(d=>d.filter(A=>A.id!==s)),o({title:"Prep deleted",description:"Removed from your Coffee Chat Library."})}catch(t){o({title:"Delete failed",description:t instanceof Error?t.message:"Please try again.",variant:"destructive"})}finally{Q(null)}},l=i.useMemo(()=>{const s=v.filter(d=>d.status==="completed"),t=v.filter(d=>d.status!=="completed");return{completed:s,inProgress:t}},[v]);return e.jsx(Fe,{children:e.jsxs("div",{className:"flex min-h-screen w-full bg-transparent text-foreground",children:[e.jsx(Te,{}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between border-b border-gray-100/30 px-6 bg-transparent shadow-sm relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ae,{className:"text-foreground hover:bg-secondary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Coffee Chat Prep"})]}),e.jsx(Ue,{})]}),e.jsx("main",{className:"p-8 bg-transparent",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:F.tier!=="pro"?e.jsx(Ie,{featureName:"Coffee Chat Prep",requiredTier:"Pro",children:e.jsxs(we,{defaultValue:"coffee-chat-prep",className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(ve,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(I,{value:"coffee-chat-prep",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(b,{className:"h-5 w-5 mr-2"}),"Coffee Chat Prep"]}),e.jsxs(I,{value:"coffee-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(pe,{className:"h-5 w-5 mr-2"}),"Coffee Library"]})]})}),e.jsx(L,{value:"coffee-chat-prep",className:"mt-6",children:e.jsxs(S,{className:"bg-white border-border rounded-2xl",children:[e.jsx(Ne,{className:"border-b border-border",children:e.jsxs(be,{className:"text-xl text-foreground flex items-center gap-2",children:["Coffee Chat Prep",e.jsx(Pe,{size:"xs",variant:"glow"}),e.jsxs(Ce,{variant:"secondary",className:"ml-auto",children:[p," credits"]})]})}),e.jsx(k,{className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"LinkedIn Profile URL"}),e.jsx(ye,{value:j,onChange:s=>K(s.target.value),placeholder:"https://linkedin.com/in/username",className:"bg-white border-input text-foreground placeholder:text-muted-foreground",disabled:u}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Uses ",p," credits. Generates a PDF with recent division news, talking points, and similarities."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(x,{onClick:Z,disabled:u||!j.trim()||(F.credits??0)<p,className:"",children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Generate Prep"]})}),c==="completed"&&(P||a)&&e.jsxs(x,{variant:"outline",onClick:()=>ee(),className:"border-green-500/60 text-green-300 hover:bg-green-500/10",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),c!=="idle"&&e.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4 shadow-inner text-sm text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u?e.jsx(y,{className:"h-4 w-4 animate-spin text-primary"}):c==="completed"?e.jsx(f,{className:"h-4 w-4 text-blue-600"}):c==="failed"?e.jsx(ge,{className:"h-4 w-4 text-destructive"}):e.jsx(je,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:W})]})})]}),e.jsx("div",{className:"space-y-4",children:c==="completed"&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-green-500/40 bg-green-500/10 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-700 uppercase tracking-wide",children:"Contact Snapshot"}),e.jsx("span",{className:"text-xs text-blue-600/80",children:"Ready for coffee chat"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(se=a.contactData)==null?void 0:se.firstName," ",(te=a.contactData)==null?void 0:te.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(ae=a.contactData)==null?void 0:ae.jobTitle]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Company:"})," ",(re=a.contactData)==null?void 0:re.company]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Office:"})," ",((le=a.contactData)==null?void 0:le.location)||((ie=a.context)==null?void 0:ie.office)]}),a.hometown&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hometown:"})," ",a.hometown]})]})]}),a.similaritySummary&&e.jsxs("div",{className:"rounded-xl border border-blue-500/40 bg-blue-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-700 uppercase tracking-wide mb-2",children:"Common Ground"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.similaritySummary})]}),a.industrySummary&&e.jsxs("div",{className:"rounded-xl border border-purple-500/40 bg-purple-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-purple-700 uppercase tracking-wide mb-2",children:"Industry Pulse"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.industrySummary})]})]}):e.jsxs("div",{className:"rounded-xl border border-border bg-muted/30 p-5 text-sm text-foreground space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"What you'll receive"}),e.jsxs("ul",{className:"space-y-2 text-foreground",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"Curated headlines tied to the division and office"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"40-second similarity summary & coffee chat questions"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"PDF saved to your Coffee Chat Library"]})]})]})})]})})]})}),e.jsx(L,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:z?e.jsx(S,{className:"bg-white border-border",children:e.jsx(k,{className:"p-6",children:e.jsx($,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[l.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:l.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),l.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",l.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:l.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>B(s),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(y,{className:"h-4 w-4 animate-spin"}):e.jsx(Y,{className:"h-4 w-4"})})]})]},s.id))})]})]})})}),e.jsx(L,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:z?e.jsx(S,{className:"bg-white border-border",children:e.jsx(k,{className:"p-6",children:e.jsx($,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[l.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:l.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),l.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",l.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:l.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>B(s),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(y,{className:"h-4 w-4 animate-spin"}):e.jsx(Y,{className:"h-4 w-4"})})]})]},s.id))})]})]})})})]})}):e.jsxs(we,{defaultValue:"coffee-chat-prep",className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(ve,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(I,{value:"coffee-chat-prep",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(b,{className:"h-5 w-5 mr-2"}),"Coffee Chat Prep"]}),e.jsxs(I,{value:"coffee-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(pe,{className:"h-5 w-5 mr-2"}),"Coffee Library"]})]})}),e.jsx(L,{value:"coffee-chat-prep",className:"mt-6",children:e.jsxs(S,{className:"bg-white border-border rounded-2xl",children:[e.jsx(Ne,{className:"border-b border-border",children:e.jsxs(be,{className:"text-xl text-foreground flex items-center gap-2",children:["Coffee Chat Prep",e.jsx(Pe,{size:"xs",variant:"glow"}),e.jsxs(Ce,{variant:"secondary",className:"ml-auto",children:[p," credits"]})]})}),e.jsx(k,{className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"LinkedIn Profile URL"}),e.jsx(ye,{value:j,onChange:s=>K(s.target.value),placeholder:"https://linkedin.com/in/username",className:"bg-white border-input text-foreground placeholder:text-muted-foreground",disabled:u}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Uses ",p," credits. Generates a PDF with recent division news, talking points, and similarities."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(x,{onClick:Z,disabled:u||!j.trim()||(F.credits??0)<p,className:"",children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Generate Prep"]})}),c==="completed"&&(P||a)&&e.jsxs(x,{variant:"outline",onClick:()=>ee(),className:"border-green-500/60 text-green-300 hover:bg-green-500/10",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),c!=="idle"&&e.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4 shadow-inner text-sm text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u?e.jsx(y,{className:"h-4 w-4 animate-spin text-primary"}):c==="completed"?e.jsx(f,{className:"h-4 w-4 text-blue-600"}):c==="failed"?e.jsx(ge,{className:"h-4 w-4 text-destructive"}):e.jsx(je,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:W})]})})]}),e.jsx("div",{className:"space-y-4",children:c==="completed"&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-green-500/40 bg-green-500/10 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-700 uppercase tracking-wide",children:"Contact Snapshot"}),e.jsx("span",{className:"text-xs text-blue-600/80",children:"Ready for coffee chat"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(ne=a.contactData)==null?void 0:ne.firstName," ",(ce=a.contactData)==null?void 0:ce.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(de=a.contactData)==null?void 0:de.jobTitle]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Company:"})," ",(oe=a.contactData)==null?void 0:oe.company]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Office:"})," ",((me=a.contactData)==null?void 0:me.location)||((xe=a.context)==null?void 0:xe.office)]}),a.hometown&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hometown:"})," ",a.hometown]})]})]}),a.similaritySummary&&e.jsxs("div",{className:"rounded-xl border border-blue-500/40 bg-blue-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-700 uppercase tracking-wide mb-2",children:"Common Ground"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.similaritySummary})]}),a.industrySummary&&e.jsxs("div",{className:"rounded-xl border border-purple-500/40 bg-purple-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-purple-700 uppercase tracking-wide mb-2",children:"Industry Pulse"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.industrySummary})]})]}):e.jsxs("div",{className:"rounded-xl border border-border bg-muted/30 p-5 text-sm text-foreground space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"What you'll receive"}),e.jsxs("ul",{className:"space-y-2 text-foreground",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"Curated headlines tied to the division and office"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"40-second similarity summary & coffee chat questions"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"PDF saved to your Coffee Chat Library"]})]})]})})]})})]})}),e.jsx(L,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:z?e.jsx(S,{className:"bg-white border-border",children:e.jsx(k,{className:"p-6",children:e.jsx($,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[l.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:l.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),l.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",l.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:l.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>B(s),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(y,{className:"h-4 w-4 animate-spin"}):e.jsx(Y,{className:"h-4 w-4"})})]})]},s.id))})]})]})})})]})})})]})]})})};export{es as default};
