import{r as w,u as A,j as e,s as R,a7 as $,a5 as L,l as s}from"./vendor-react-DiVfGd0B.js";import{a as T,P as F,B as p,G as g}from"./index-CAu39nmG.js";import{l as M}from"./vendor-stripe-U9JJOqTM.js";import{g as b}from"./vendor-firebase-BQzy1uck.js";import{b as O}from"./analytics-BKO9ZQLz.js";const H="pk_live_51S4BB8ERY2WrVHp1acXrKE6RBG7NBlfHcMZ2kf7XhCX2E5g8Lasedx6ntcaD1H4BsoUMBGYXIcKHcAB4JuohLa2B00j7jtmWnB",D=M(H),z="price_1ScLXrERY2WrVHp1bYgdMAu4",G="price_1ScLcfERY2WrVHp1c5rcONJ3",J=()=>{const[d,f]=w.useState(!1),[r,U]=w.useState(null),y=A(),{user:n,updateUser:v,checkCredits:k}=T();w.useEffect(()=>{n&&_()},[n]);const _=async()=>{try{const a=b().currentUser;if(!a)return;const l=await a.getIdToken(),x=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${x}/api/subscription-status`,{headers:{Authorization:`Bearer ${l}`}});if(c.ok){const m=await c.json();U(m)}}catch(t){console.error("Failed to fetch subscription status:",t)}},E=async()=>{if(n){f(!0);try{const a=b().currentUser;if(!a)throw new Error("No Firebase user found");const l=await a.getIdToken(),x=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${x}/api/create-portal-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({returnUrl:`${window.location.origin}/pricing`})});if(!c.ok){const o=await c.json().catch(()=>({error:"Unknown error"})),h=o.details||o.error||"Failed to create portal session";throw new Error(h)}const{url:m}=await c.json();if(!m)throw new Error("No portal URL received from server");window.location.href=m}catch(t){console.error("Portal error:",t);const a=t instanceof Error?t.message:"Failed to open subscription management. Please try again.";a.includes("mode mismatch")||a.includes("test mode")||a.includes("live mode")?alert("Stripe Configuration Error: There is a mismatch between test and live mode keys. Please contact support or check your Stripe configuration."):alert(`Failed to open subscription management: ${a}`)}finally{f(!1)}}},u=async t=>{if(!n)return;const l={free:300,pro:1500,elite:3e3}[t];try{console.log(`ðŸ”„ Resetting credits for ${t} tier to ${l}`),await v({credits:l,maxCredits:l}),k&&await k()}catch(x){console.error("Error resetting credits:",x)}},j=async(t,a)=>{if(n)try{t==="free"?(await v({tier:"free",credits:300,maxCredits:300}),y("/home")):(t==="pro"||t==="elite")&&(O(a||"pricing",{from_location:"pricing_page",plan_selected:t}),await B(t))}catch(l){console.error("Error updating user:",l)}},B=async(t="pro")=>{if(!n){console.error("User not authenticated");return}f(!0);try{const l=b().currentUser;if(!l)throw new Error("No Firebase user found");const x=await l.getIdToken(),c=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",m=t==="elite"?G:z,o=await fetch(`${c}/api/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({priceId:m,userId:n.uid,userEmail:n.email,successUrl:`${window.location.origin}/payment-success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})});if(!o.ok){const S=await o.text();throw console.error("Checkout session creation failed:",o.status,S),new Error(`Failed to create checkout session: ${o.status} - ${S}`)}const h=await o.json();console.log("Checkout session response:",h);const C=h.sessionId;if(!C)throw console.error("No sessionId in response:",h),new Error("Invalid response from server: missing sessionId");const I=await D;if(!I)throw new Error("Stripe failed to initialize");const{error:N}=await I.redirectToCheckout({sessionId:C});N&&(console.error("Stripe redirect error:",N),alert("Payment error: "+N.message))}catch(a){console.error("Checkout error:",a);const l=a instanceof Error?a.message:"Unknown error";alert(`Something went wrong: ${l}`)}finally{f(!1)}},P=((r==null?void 0:r.tier)==="pro"||(r==null?void 0:r.tier)==="elite")&&(r==null?void 0:r.status)==="active",i=(r==null?void 0:r.tier)||"free";return e.jsx(F,{children:e.jsxs("div",{className:"container mx-auto px-6 py-6 max-w-7xl",children:[e.jsxs(p,{variant:"ghost",onClick:()=>y("/home"),className:"mb-8 text-gray-300 text-slate-700 hover:text-blue-400",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),P&&e.jsxs(g,{className:"mb-8 p-4 rounded-xl flex items-center justify-between border-blue-500/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-400",children:"Pro Subscription Active"}),(r==null?void 0:r.cancelAtPeriodEnd)&&e.jsxs("p",{className:"text-sm text-gray-400 text-slate-600",children:["Cancels on ",new Date(r.currentPeriodEnd*1e3).toLocaleDateString()]})]}),e.jsxs(p,{onClick:E,disabled:d,className:"btn-primary-glass",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 bg-blue-500/20 px-3 py-1 rounded-full border border-blue-500/30",children:[e.jsx(L,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-400 uppercase tracking-wide",children:"Our Pricing"})]})}),e.jsxs("h1",{className:"text-display-lg mb-6 text-white text-slate-900",children:[e.jsx("span",{className:"text-black",children:"Choose"})," ",e.jsx("span",{className:"gradient-text-teal",children:"your plan"})," ",e.jsx("span",{className:"text-black",children:"today"})]}),e.jsx("p",{className:"text-gray-400 text-slate-600 text-lg mb-8",children:"15 credits per contact. When you run out of credits, no more contacts."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-7xl w-full",children:[e.jsxs(g,{className:"rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 text-white text-slate-900",children:"Free"}),e.jsx("p",{className:"text-gray-400 text-slate-600",children:"Try it out for free"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"300 credits (~20 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Basic contact search + AI email drafts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Gmail integration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Directory saves all contacts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"3 Coffee Chat Preps + 2 Interview Preps"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Exports disabled"})]})]}),e.jsx(p,{className:"btn-secondary-glass w-full py-4 px-6 font-semibold",onClick:()=>i==="free"?u("free"):j("free","pricing_page"),children:i==="free"?"Current Plan":"Start for Free"})]}),e.jsx("div",{className:"p-[3px] rounded-2xl bg-gradient-to-r from-blue-400 via-blue-600 to-cyan-400 shadow-[0_0_40px_rgba(59,130,246,0.5)] scale-105 z-10 transform transition-all hover:scale-[1.07]",children:e.jsxs(g,{className:"relative rounded-xl h-full p-10",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30 text-xs font-medium",children:P?"ACTIVE":"MOST POPULAR"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 gradient-text-teal",children:"Pro"}),e.jsx("p",{className:"text-gray-400 text-slate-600 mb-3",children:"Best for Students"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-400 text-slate-600 text-lg line-through mr-2",children:"$19.99"}),e.jsx("span",{className:"text-4xl font-bold text-white text-slate-900",children:"$14.99"}),e.jsx("span",{className:"text-gray-600 text-lg ml-1",children:"/month"})]}),e.jsx("p",{className:"text-gray-500",children:"1,500 credits (~100 contacts)"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"1,500 credits (~100 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700 font-bold",children:"Everything in Free, plus:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Full Firm Search"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Smart school/major/career filters"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"10 Coffee Chat Preps/month"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"5 Interview Preps/month"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited directory saving"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Bulk drafting + Export unlocked (CSV & Gmail)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: ~2,500 minutes/month"})]})]}),e.jsx(p,{className:"btn-primary-glass w-full py-6 px-6 text-lg font-semibold",onClick:d?void 0:i==="pro"||i==="elite"?t=>{t.shiftKey?u(i==="elite"?"elite":"pro"):E()}:()=>j("pro","pricing_page"),disabled:d,title:i==="pro"||i==="elite"?"Click to manage subscription. Hold Shift+Click to reset credits.":void 0,children:d?"Processing...":i==="pro"||i==="elite"?"Manage Subscription":"Upgrade to Pro"})]})}),e.jsxs(g,{className:"rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 text-white text-slate-900",children:"Elite"}),e.jsx("p",{className:"text-gray-400 text-slate-600",children:"For serious recruiting season"})]}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("span",{className:"text-3xl font-bold text-white text-slate-900",children:"$34.99"}),e.jsx("span",{className:"text-gray-400 text-slate-600 text-lg ml-1",children:"/month"})]}),e.jsx("p",{className:"text-gray-300 text-slate-700 text-center mb-8",children:"3,000 credits (~200 contacts)"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"3,000 credits (~200 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700 font-bold",children:"Everything in Pro, plus:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited Coffee Chat Prep"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited Interview Prep"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Priority queue for contact generation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Personalized outreach templates (tailored to resume)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Weekly personalized firm insights"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Early access to new AI tools"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: ~5,000 minutes/month"})]})]}),e.jsx(p,{className:"btn-secondary-glass w-full py-4 px-6 font-semibold",onClick:()=>i==="elite"?u("elite"):j("elite","pricing_page"),disabled:d,children:d?"Processing...":i==="elite"?"Current Plan":"Go Elite"})]})]})})]})})};export{J as default};
