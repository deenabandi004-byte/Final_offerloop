import{j as e}from"./vendor-ui-Dvm6rNa4.js";import{r as l,a as ke}from"./vendor-react-BYoYq924.js";import{a as Le,B as x,x as M,t as d}from"./index-BlHBLROI.js";import{S as Fe,A as Te,a as Ae,C as b,b as H}from"./AppSidebar-Cn2aJ38A.js";import{C as D,a as pe,b as ge,c as S}from"./card-BhhoFDdW.js";import{I as je}from"./input-XODqQdub.js";import{T as Ne,a as be,b as I,c as k}from"./tabs-B3Jp1R5J.js";import{B as ye}from"./badge-BdqHLg7L.js";import{L as Ie,B as we,C as u}from"./LockedFeatureOverlay-CsomAHDv.js";import{D as L,a as y}from"./api-BaCf4yf7.js";import{C as p}from"./constants-CpKbYGZX.js";import{d as Re,l as Ee}from"./activityLogger-hKmX71uM.js";import{P as Ue}from"./PageHeaderActions-DBb3HQNj.js";import{F as ve}from"./file-text-anY0C2WZ.js";import{L as w}from"./loader-circle-Dc92CH8W.js";import{C as Ce}from"./circle-x-BeHmYZBE.js";import{C as Pe}from"./clock-DBBbNjqD.js";import{B as O}from"./badge-check-8cj4Bimp.js";import{M as Y}from"./map-pin-ChQYAUwW.js";import{T as X}from"./trash-2-CokCcdpM.js";import"./avatar-Dzw8yNMj.js";import"./user-C_wegfzu.js";import"./search-BYePgFCK.js";import"./briefcase-dTGXHmKy.js";import"./credit-card-CUtRkOcf.js";import"./settings-DRsa6wdQ.js";import"./chevron-down-BYs8h_N4.js";import"./zap-4xeOdT8m.js";import"./firebaseApi-DOnxKxO3.js";import"./external-link-CNjLoQl2.js";const fs=()=>{var se,te,ae,re,ie,le,ne,oe,ce,de,me,xe;const{user:g,checkCredits:R}=Le(),F=g||{credits:0,tier:"free"},[j,$]=l.useState(""),[f,E]=l.useState(!1),[K,T]=l.useState(""),[P,V]=l.useState(null),[a,W]=l.useState(null),[o,U]=l.useState("idle"),[Ge,J]=l.useState(0),G=l.useRef(null),[v,B]=l.useState([]),[_,De]=l.useState(!0),[C,Q]=l.useState(null);l.useEffect(()=>()=>{G.current&&(clearTimeout(G.current),G.current=null)},[]),l.useEffect(()=>{(async()=>{try{const t=await y.getAllCoffeeChatPreps();if("error"in t)throw new Error(t.error);B(t.preps||[])}catch(t){console.error("Failed to load coffee chat preps:",t),d({title:"Unable to load library",description:t instanceof Error?t.message:"Please try again.",variant:"destructive"})}finally{De(!1)}})()},[]),l.useEffect(()=>{o==="completed"&&P&&(async()=>{try{const t=await y.getAllCoffeeChatPreps();if("error"in t)return;B(t.preps||[])}catch{}})()},[o,P]);const Z=async()=>{if(!j.trim()){d({title:"Missing LinkedIn URL",description:"Please enter a LinkedIn profile URL.",variant:"destructive"});return}if(!g){d({title:"Authentication Required",description:"Please sign in to continue.",variant:"destructive"});return}if((F.credits??0)<p){d({title:"Insufficient Credits",description:`You need ${p} credits to generate a coffee chat prep.`,variant:"destructive"});return}E(!0),U("processing"),T("Starting Coffee Chat Prep..."),W(null),J(s=>s+1);try{const s=await y.createCoffeeChatPrep({linkedinUrl:j});if("error"in s)throw new Error(s.error);const t=s.prepId;V(t);let c=0;const A=200;await new Promise((he,r)=>{const m=setInterval(async()=>{c++;try{const n=await y.getCoffeeChatPrepStatus(t);if("error"in n&&!("status"in n)){clearInterval(m),r(new Error(n.error));return}if(n.pdfUrl){if(clearInterval(m),g!=null&&g.uid&&n.contactData)try{const h=n.contactData,fe=h.name||`${h.firstName||""} ${h.lastName||""}`.trim()||"",ue=h.company||h.companyName||"",Se=Re({contactName:fe||void 0,company:ue||void 0});await Ee(g.uid,"coffeePrep",Se,{prepId:t,linkedinUrl:j,contactName:fe||"",company:ue||""})}catch(h){console.error("Failed to log coffee chat prep activity:",h)}ke.flushSync(()=>{E(!1),U("completed"),T("Coffee Chat Prep ready!"),W(n),V(n.id||t),J(h=>h+1)}),d({title:"Coffee Chat Prep Ready!",description:"Your one-pager has been generated successfully.",duration:5e3}),R==null||R(),he(n);return}"status"in n&&T("Processing your request..."),c>=A&&(clearInterval(m),r(new Error("Generation timed out")))}catch(n){clearInterval(m),r(n)}},3e3)})}catch(s){console.error("Coffee chat prep failed:",s),U("failed"),T("Generation failed"),d({title:"Generation Failed",description:s.message||"Please try again.",variant:"destructive"})}finally{E(!1)}},ee=async s=>{const t=P;if(!(!t||!g))try{let N;d({title:"Preparing PDF",description:"Please wait while we prepare your Coffee Chat PDF...",duration:3e3});for(let r=0;r<20;r++){try{const m=await y.downloadCoffeeChatPDF(t);if(N=(m==null?void 0:m.pdfUrl)||void 0,N&&(await fetch(N,{method:"HEAD"})).ok)break}catch{}await new Promise(m=>setTimeout(m,1e3))}if(!N)throw new Error("PDF isn't ready yet. Please try again in a moment.");if(await new Promise(r=>setTimeout(r,500)),!window.open(N,"_blank","noopener,noreferrer")){const r=document.createElement("a");r.href=N,r.target="_blank",r.rel="noopener noreferrer",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}d({title:"PDF Ready",description:"Opened your Coffee Chat one-pager in a new tab."})}catch(c){d({title:"Download Failed",description:c instanceof Error?c.message:"Could not download the PDF.",variant:"destructive"})}},z=async s=>{try{if(s.pdfUrl){window.open(s.pdfUrl,"_blank","noopener");return}const{pdfUrl:t}=await y.downloadCoffeeChatPDF(s.id);if(t)window.open(t,"_blank","noopener");else throw new Error("PDF URL not available yet")}catch{d({title:"Download failed",description:"Could not open the PDF. Please try again.",variant:"destructive"})}},q=async s=>{Q(s);try{const t=await y.deleteCoffeeChatPrep(s);if("error"in t)throw new Error(t.error);B(c=>c.filter(A=>A.id!==s)),d({title:"Prep deleted",description:"Removed from your Coffee Chat Library."})}catch(t){d({title:"Delete failed",description:t instanceof Error?t.message:"Please try again.",variant:"destructive"})}finally{Q(null)}},i=l.useMemo(()=>{const s=v.filter(c=>c.status==="completed"),t=v.filter(c=>c.status!=="completed");return{completed:s,inProgress:t}},[v]);return e.jsx(Fe,{children:e.jsxs("div",{className:"flex min-h-screen w-full bg-transparent text-foreground",children:[e.jsx(Te,{}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between border-b border-gray-100/30 px-6 bg-transparent shadow-sm relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ae,{className:"text-foreground hover:bg-secondary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Coffee Chat Prep"})]}),e.jsx(Ue,{})]}),e.jsx("main",{className:"p-8 bg-transparent",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:F.tier!=="pro"?e.jsx(Ie,{featureName:"Coffee Chat Prep",requiredTier:"Pro",children:e.jsxs(Ne,{defaultValue:"coffee-chat-prep",className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(be,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(I,{value:"coffee-chat-prep",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(b,{className:"h-5 w-5 mr-2"}),"Coffee Chat Prep"]}),e.jsxs(I,{value:"coffee-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(ve,{className:"h-5 w-5 mr-2"}),"Coffee Library"]})]})}),e.jsx(k,{value:"coffee-chat-prep",className:"mt-6",children:e.jsxs(D,{className:"bg-white border-border rounded-2xl",children:[e.jsx(pe,{className:"border-b border-border",children:e.jsxs(ge,{className:"text-xl text-foreground flex items-center gap-2",children:["Coffee Chat Prep",e.jsx(we,{size:"xs",variant:"glow"}),e.jsxs(ye,{variant:"secondary",className:"ml-auto",children:[p," credits"]})]})}),e.jsx(S,{className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"LinkedIn Profile URL"}),e.jsx(je,{value:j,onChange:s=>$(s.target.value),placeholder:"https://linkedin.com/in/username",className:"bg-white border-input text-foreground placeholder:text-muted-foreground",disabled:f}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Uses ",p," credits. Generates a PDF with recent division news, talking points, and similarities."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(x,{onClick:Z,disabled:f||!j.trim()||(F.credits??0)<p,className:"",children:f?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Generate Prep"]})}),o==="completed"&&(P||a)&&e.jsxs(x,{variant:"outline",onClick:()=>ee(),className:"border-green-500/60 text-green-300 hover:bg-green-500/10",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),o!=="idle"&&e.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4 shadow-inner text-sm text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[f?e.jsx(w,{className:"h-4 w-4 animate-spin text-primary"}):o==="completed"?e.jsx(u,{className:"h-4 w-4 text-blue-600"}):o==="failed"?e.jsx(Ce,{className:"h-4 w-4 text-destructive"}):e.jsx(Pe,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:K})]})})]}),e.jsx("div",{className:"space-y-4",children:o==="completed"&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-green-500/40 bg-green-500/10 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-700 uppercase tracking-wide",children:"Contact Snapshot"}),e.jsx("span",{className:"text-xs text-blue-600/80",children:"Ready for coffee chat"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(se=a.contactData)==null?void 0:se.firstName," ",(te=a.contactData)==null?void 0:te.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(ae=a.contactData)==null?void 0:ae.jobTitle]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Company:"})," ",(re=a.contactData)==null?void 0:re.company]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Office:"})," ",((ie=a.contactData)==null?void 0:ie.location)||((le=a.context)==null?void 0:le.office)]}),a.hometown&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hometown:"})," ",a.hometown]})]})]}),a.similaritySummary&&e.jsxs("div",{className:"rounded-xl border border-blue-500/40 bg-blue-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-700 uppercase tracking-wide mb-2",children:"Common Ground"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.similaritySummary})]}),a.industrySummary&&e.jsxs("div",{className:"rounded-xl border border-purple-500/40 bg-purple-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-purple-700 uppercase tracking-wide mb-2",children:"Industry Pulse"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.industrySummary})]})]}):e.jsxs("div",{className:"rounded-xl border border-border bg-muted/30 p-5 text-sm text-foreground space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"What you'll receive"}),e.jsxs("ul",{className:"space-y-2 text-foreground",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"Curated headlines tied to the division and office"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"40-second similarity summary & coffee chat questions"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"PDF saved to your Coffee Chat Library"]})]})]})})]})})]})}),e.jsx(k,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:_?e.jsx(D,{className:"bg-white border-border",children:e.jsx(S,{className:"p-6",children:e.jsx(M,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[i.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:i.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),i.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",i.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:i.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(O,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>z(s),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(w,{className:"h-4 w-4 animate-spin"}):e.jsx(X,{className:"h-4 w-4"})})]})]},s.id))})]})]})})}),e.jsx(k,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:_?e.jsx(D,{className:"bg-white border-border",children:e.jsx(S,{className:"p-6",children:e.jsx(M,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[i.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:i.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),i.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",i.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:i.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(O,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>z(s),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(w,{className:"h-4 w-4 animate-spin"}):e.jsx(X,{className:"h-4 w-4"})})]})]},s.id))})]})]})})})]})}):e.jsxs(Ne,{defaultValue:"coffee-chat-prep",className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(be,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(I,{value:"coffee-chat-prep",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(b,{className:"h-5 w-5 mr-2"}),"Coffee Chat Prep"]}),e.jsxs(I,{value:"coffee-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(ve,{className:"h-5 w-5 mr-2"}),"Coffee Library"]})]})}),e.jsx(k,{value:"coffee-chat-prep",className:"mt-6",children:e.jsxs(D,{className:"bg-white border-border rounded-2xl",children:[e.jsx(pe,{className:"border-b border-border",children:e.jsxs(ge,{className:"text-xl text-foreground flex items-center gap-2",children:["Coffee Chat Prep",e.jsx(we,{size:"xs",variant:"glow"}),e.jsxs(ye,{variant:"secondary",className:"ml-auto",children:[p," credits"]})]})}),e.jsx(S,{className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"LinkedIn Profile URL"}),e.jsx(je,{value:j,onChange:s=>$(s.target.value),placeholder:"https://linkedin.com/in/username",className:"bg-white border-input text-foreground placeholder:text-muted-foreground",disabled:f}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Uses ",p," credits. Generates a PDF with recent division news, talking points, and similarities."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(x,{onClick:Z,disabled:f||!j.trim()||(F.credits??0)<p,className:"",children:f?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Generate Prep"]})}),o==="completed"&&(P||a)&&e.jsxs(x,{variant:"outline",onClick:()=>ee(),className:"border-green-500/60 text-green-300 hover:bg-green-500/10",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),o!=="idle"&&e.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4 shadow-inner text-sm text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[f?e.jsx(w,{className:"h-4 w-4 animate-spin text-primary"}):o==="completed"?e.jsx(u,{className:"h-4 w-4 text-blue-600"}):o==="failed"?e.jsx(Ce,{className:"h-4 w-4 text-destructive"}):e.jsx(Pe,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:K})]})})]}),e.jsx("div",{className:"space-y-4",children:o==="completed"&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-green-500/40 bg-green-500/10 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-700 uppercase tracking-wide",children:"Contact Snapshot"}),e.jsx("span",{className:"text-xs text-blue-600/80",children:"Ready for coffee chat"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(ne=a.contactData)==null?void 0:ne.firstName," ",(oe=a.contactData)==null?void 0:oe.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(ce=a.contactData)==null?void 0:ce.jobTitle]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Company:"})," ",(de=a.contactData)==null?void 0:de.company]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Office:"})," ",((me=a.contactData)==null?void 0:me.location)||((xe=a.context)==null?void 0:xe.office)]}),a.hometown&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hometown:"})," ",a.hometown]})]})]}),a.similaritySummary&&e.jsxs("div",{className:"rounded-xl border border-blue-500/40 bg-blue-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-700 uppercase tracking-wide mb-2",children:"Common Ground"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.similaritySummary})]}),a.industrySummary&&e.jsxs("div",{className:"rounded-xl border border-purple-500/40 bg-purple-500/10 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-purple-700 uppercase tracking-wide mb-2",children:"Industry Pulse"}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:a.industrySummary})]})]}):e.jsxs("div",{className:"rounded-xl border border-border bg-muted/30 p-5 text-sm text-foreground space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"What you'll receive"}),e.jsxs("ul",{className:"space-y-2 text-foreground",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"Curated headlines tied to the division and office"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"40-second similarity summary & coffee chat questions"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600 mt-0.5"}),"PDF saved to your Coffee Chat Library"]})]})]})})]})})]})}),e.jsx(k,{value:"coffee-library",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:_?e.jsx(D,{className:"bg-white border-border",children:e.jsx(S,{className:"p-6",children:e.jsx(M,{variant:"card",count:3})})}):v.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-white p-10 text-center space-y-4",children:[e.jsx(b,{className:"h-10 w-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No preps yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate your first coffee chat prep to see it appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[i.inProgress.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase mb-3",children:"In Progress"}),e.jsx("div",{className:"grid gap-4",children:i.inProgress.map(s=>e.jsxs("div",{className:"rounded-lg border border-yellow-500/40 bg-yellow-500/10 px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.contactName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requested ",s.createdAt?new Date(s.createdAt).toLocaleString():""]})]}),e.jsx("div",{className:"text-xs uppercase text-yellow-600",children:"Processing..."})]},s.id))})]}),i.completed.length>0&&e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase",children:["Completed (",i.completed.length,")"]}),e.jsx("div",{className:"grid gap-4",children:i.completed.map(s=>e.jsxs("div",{className:"rounded-xl border border-border bg-white p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground font-medium",children:[e.jsx(O,{className:"h-4 w-4 text-blue-600"}),s.contactName]}),e.jsxs("div",{className:"text-sm text-foreground",children:[s.jobTitle," @ ",s.company]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"—"]}),s.hometown&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),s.hometown]})]}),s.industrySummary&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.industrySummary})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>z(s),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive/80",disabled:C===s.id,onClick:()=>q(s.id),children:C===s.id?e.jsx(w,{className:"h-4 w-4 animate-spin"}):e.jsx(X,{className:"h-4 w-4"})})]})]},s.id))})]})]})})})]})})})]})]})})};export{fs as default};
