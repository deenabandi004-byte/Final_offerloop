import{u as x,j as r,aJ as w,as as y,r as m}from"./vendor-react-Bye97upB.js";import{b as U}from"./analytics-BfdMicsw.js";import{g}from"./vendor-firebase-Bz1e_Tmy.js";const I=({hasExhaustedLimit:s,hasEnoughCredits:e,currentUsage:n,limit:t,tier:p,requiredCredits:u,currentCredits:o,featureName:d,nextTier:a,showUpgradeButton:i=!0})=>{const l=x();if(!s&&e)return null;const c=!e;return r.jsx("div",{className:"mb-6 rounded-md border-l-4 border-blue-400 bg-blue-50/70",children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(w,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:c?r.jsxs(r.Fragment,{children:["You need ",u," credits to generate a ",d.slice(0,-1),". You currently have ",o," credits."]}):r.jsxs(r.Fragment,{children:["You've used ",n," of ",typeof t=="number"?t:"unlimited"," ",d,". Upgrade to ",a," for more."]})}),i&&r.jsxs("button",{onClick:()=>{U(d.toLowerCase().replace(/\s+/g,"_"),{from_action:c?"insufficient_credits":"limit_reached",from_location:"banner"}),l("/pricing")},className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:["Upgrade to ",a," â†’"]})]})]})})})},E=({size:s="sm",variant:e="gradient"})=>{const n={xs:"text-[10px] px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},t={gradient:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",outline:"bg-transparent border-2 border-blue-400 text-blue-400",subtle:"bg-blue-500/20 text-blue-300 border border-blue-400/30",glow:"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg shadow-blue-500/50"};return r.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md font-semibold ${n[s]} ${t[e]}`,children:[r.jsx(y,{className:"h-3 w-3"}),"BETA"]})};function P(){const[s,e]=m.useState(null),[n,t]=m.useState(!0),[p,u]=m.useState(null),o=async()=>{try{const i=g().currentUser;if(!i){e(null),t(!1);return}const l=await i.getIdToken(),c=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",f=await fetch(`${c}/api/user/subscription`,{headers:{Authorization:`Bearer ${l}`}});if(!f.ok)throw new Error("Failed to fetch subscription");const h=await f.json();e(h),u(null)}catch(a){console.error("Error fetching subscription:",a),u(a instanceof Error?a.message:"Unknown error"),e({tier:"free",credits:0,maxCredits:300,alumniSearchesUsed:0,alumniSearchesLimit:10,coffeeChatPrepsUsed:0,coffeeChatPrepsLimit:1,interviewPrepsUsed:0,interviewPrepsLimit:1})}finally{t(!1)}};return m.useEffect(()=>{o();const a=setInterval(o,3e4);return()=>clearInterval(a)},[]),{subscription:s,loading:n,error:p,refetch:o,incrementUsage:async a=>{try{const l=g().currentUser;if(!l)return!1;const c=await l.getIdToken(),f=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai";if(!(await fetch(`${f}/api/user/increment-usage`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({feature:a})})).ok)throw new Error("Failed to increment usage");return await o(),!0}catch(i){return console.error("Error incrementing usage:",i),!1}}}}const k={free:{credits:300,alumniSearches:10,coffeeChatPreps:3,interviewPreps:2,firmSearch:!1,smartFilters:!1,bulkDrafting:!1,exportEnabled:!1,priorityQueue:!1,personalizedTemplates:!1,weeklyInsights:!1,earlyAccess:!1},pro:{credits:1500,alumniSearches:"unlimited",coffeeChatPreps:10,interviewPreps:5,firmSearch:!0,smartFilters:!0,bulkDrafting:!0,exportEnabled:!0,priorityQueue:!1,personalizedTemplates:!1,weeklyInsights:!1,earlyAccess:!1},elite:{credits:3e3,alumniSearches:"unlimited",coffeeChatPreps:"unlimited",interviewPreps:"unlimited",firmSearch:!0,smartFilters:!0,bulkDrafting:!0,exportEnabled:!0,priorityQueue:!0,personalizedTemplates:!0,weeklyInsights:!0,earlyAccess:!0}};function b(s,e){return k[s][e]}function C(s,e,n){const t=b(s,e);return t==="unlimited"?!0:n<t}function A(s,e,n){const t=b(s,e);return t==="unlimited"?"unlimited":Math.max(0,t-n)}export{E as B,I as U,A as a,C as c,b as g,P as u};
