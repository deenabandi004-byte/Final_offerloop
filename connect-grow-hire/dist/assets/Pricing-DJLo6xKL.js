import{j as e}from"./vendor-ui-Dvm6rNa4.js";import{r as S,u as O}from"./vendor-react-BYoYq924.js";import{a as B,m as E,P as F,B as v,A as V,G as k,C as d}from"./index-BlHBLROI.js";import{S as W}from"./settings-DRsa6wdQ.js";import{C as D}from"./credit-card-CUtRkOcf.js";var R="basil",H=function(t){return t===3?"v3":t},T="https://js.stripe.com",J="".concat(T,"/").concat(R,"/stripe.js"),M=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,z=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Y=function(t){return M.test(t)||z.test(t)},q=function(){for(var t=document.querySelectorAll('script[src^="'.concat(T,'"]')),r=0;r<t.length;r++){var a=t[r];if(Y(a.src))return a}return null},L=function(t){var r="",a=document.createElement("script");a.src="".concat(J).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(a),a},K=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:r})},w=null,b=null,N=null,Q=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},X=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},Z=function(t){return w!==null?w:(w=new Promise(function(r,a){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var s=q();if(!(s&&t)){if(!s)s=L(t);else if(s&&N!==null&&b!==null){var i;s.removeEventListener("load",N),s.removeEventListener("error",b),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=L(t)}}N=X(r,a),b=Q(a),s.addEventListener("load",N),s.addEventListener("error",b)}catch(u){a(u);return}}),w.catch(function(r){return w=null,Promise.reject(r)}))},ee=function(t,r,a){if(t===null)return null;var s=r[0],i=s.match(/^pk_test/),u=H(t.version),j=R;i&&u!==j&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(j,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var h=t.apply(void 0,r);return K(h,a),h},g,_=!1,A=function(){return g||(g=Z(null).catch(function(t){return g=null,Promise.reject(t)}),g)};Promise.resolve().then(function(){return A()}).catch(function(n){_||console.warn(n)});var te=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];_=!0;var s=Date.now();return A().then(function(i){return ee(i,r,s)})};const $="pk_test_51S4BB8ERY2WrVHp1WPs1H5UpdwCuJaxeeZE9khGQrkgIGuRY4zVrGRtrO8lCsH9QgctGEGrMYU9dIqhwEuSTh4Gu000ts47riH",re=te($),se=$.startsWith("pk_test_")?"price_1ScIyzERY2WrVHp1m9pJSNlK":"price_1SQ0IJERY2WrVHp1Ul5OrP63",ce=()=>{const[n,t]=S.useState(!1),[r,a]=S.useState(null),s=O(),{user:i,updateUser:u}=B();S.useEffect(()=>{i&&j()},[i]);const j=async()=>{try{const l=E().currentUser;if(!l)return;const p=await l.getIdToken(),f=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${f}/api/subscription-status`,{headers:{Authorization:`Bearer ${p}`}});if(c.ok){const x=await c.json();a(x)}}catch(o){console.error("Failed to fetch subscription status:",o)}},h=async()=>{if(i){t(!0);try{const l=E().currentUser;if(!l)throw new Error("No Firebase user found");const p=await l.getIdToken(),f=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${f}/api/create-portal-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({returnUrl:`${window.location.origin}/pricing`})});if(!c.ok)throw new Error("Failed to create portal session");const{url:x}=await c.json();window.location.href=x}catch(o){console.error("Portal error:",o),alert("Failed to open subscription management. Please try again.")}finally{t(!1)}}},G=async()=>{if(!i){console.error("User not authenticated");return}t(!0);try{const l=E().currentUser;if(!l)throw new Error("No Firebase user found");const p=await l.getIdToken(),f=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${f}/api/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({priceId:se,userId:i.uid,userEmail:i.email,successUrl:`${window.location.origin}/payment-success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})});if(!c.ok){const U=await c.text();throw console.error("Checkout session creation failed:",c.status,U),new Error(`Failed to create checkout session: ${c.status} - ${U}`)}const x=await c.json();console.log("Checkout session response:",x);const I=x.sessionId;if(!I)throw console.error("No sessionId in response:",x),new Error("Invalid response from server: missing sessionId");const C=await re;if(!C)throw new Error("Stripe failed to initialize");const{error:y}=await C.redirectToCheckout({sessionId:I});y&&(console.error("Stripe redirect error:",y),alert("Payment error: "+y.message))}catch(o){console.error("Checkout error:",o);const l=o instanceof Error?o.message:"Unknown error";alert(`Something went wrong: ${l}`)}finally{t(!1)}},P=async o=>{if(i)try{o==="free"?(await u({tier:"free",credits:150,maxCredits:150}),s("/home")):o==="pro"&&await G()}catch(l){console.error("Error updating user:",l)}},m=(r==null?void 0:r.tier)==="pro"&&(r==null?void 0:r.status)==="active";return e.jsx(F,{children:e.jsxs("div",{className:"container mx-auto px-6 py-6 max-w-6xl",children:[e.jsxs(v,{variant:"ghost",onClick:()=>s("/home"),className:"mb-8 text-gray-300 text-slate-700 hover:text-blue-400",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),m&&e.jsxs(k,{className:"mb-8 p-4 rounded-xl flex items-center justify-between border-blue-500/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-400",children:"Pro Subscription Active"}),(r==null?void 0:r.cancelAtPeriodEnd)&&e.jsxs("p",{className:"text-sm text-gray-400 text-slate-600",children:["Cancels on ",new Date(r.currentPeriodEnd*1e3).toLocaleDateString()]})]}),e.jsxs(v,{onClick:h,disabled:n,className:"btn-primary-glass",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 bg-blue-500/20 px-3 py-1 rounded-full border border-blue-500/30",children:[e.jsx(D,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-400 uppercase tracking-wide",children:"Our Pricing"})]})}),e.jsxs("h1",{className:"text-display-lg mb-6 text-white text-slate-900",children:[e.jsx("span",{className:"text-black",children:"Choose"})," ",e.jsx("span",{className:"gradient-text-teal",children:"your plan"})," ",e.jsx("span",{className:"text-black",children:"today"})]}),e.jsx("p",{className:"text-gray-400 text-slate-600 text-lg mb-8",children:"15 credits per contact. When you run out of credits, no more contacts."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 max-w-6xl w-full",children:[e.jsxs(k,{className:"rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 text-white text-slate-900",children:"Free"}),e.jsx("p",{className:"text-gray-400 text-slate-600",children:"Try out platform risk free"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"150 credits (10 emails) "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: 250 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Try out platform risk free"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Limited Features"})]})]}),e.jsx(v,{className:"btn-secondary-glass w-full py-4 px-6 font-semibold",onClick:()=>P("free"),disabled:m,children:m?"Current Plan: Pro":"Start for free"})]}),e.jsxs(k,{className:"relative rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal border-2 border-blue-500/50",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30 text-xs font-medium",children:m?"ACTIVE":"RECOMMENDED"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 gradient-text-teal",children:"Pro"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-400 text-slate-600 text-xl line-through mr-2",children:"$34.99"}),e.jsx("span",{className:"text-3xl font-bold text-white text-slate-900",children:"$8.99"}),e.jsx("span",{className:"text-gray-400 text-slate-600 text-lg ml-1",children:"/month"})]}),e.jsx("p",{className:"text-gray-300 text-slate-700",children:"1800 credits"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"1800 credits (120 emails) "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: 2500 minutes"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Everything in free plus:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Directory permanently saves"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Priority Support"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Advanced features"})]})]}),e.jsx(v,{className:"btn-primary-glass w-full py-6 px-6 text-lg font-semibold",onClick:m?h:()=>P("pro"),disabled:n,children:n?"Processing...":m?"Manage Subscription":"Start now"})]})]})})]})})};export{ce as default};
