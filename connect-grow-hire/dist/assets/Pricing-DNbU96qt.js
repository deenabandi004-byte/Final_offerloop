import{r as y,u as R,j as e,s as L,a7 as T,a5 as F,l as s}from"./vendor-react-Bye97upB.js";import{a as M,P as O,B as p,G as u}from"./index-DlXH6OO2.js";import{l as H}from"./vendor-stripe-U9JJOqTM.js";import{g as v}from"./vendor-firebase-Bz1e_Tmy.js";import{b as D}from"./analytics-BfdMicsw.js";const z="pk_live_51S4BB8ERY2WrVHp1acXrKE6RBG7NBlfHcMZ2kf7XhCX2E5g8Lasedx6ntcaD1H4BsoUMBGYXIcKHcAB4JuohLa2B00j7jtmWnB",G=H(z),W="price_1ScLXrERY2WrVHp1bYgdMAu4",Y="price_1ScLcfERY2WrVHp1c5rcONJ3",Z=()=>{const[x,f]=y.useState(!1),[a,U]=y.useState(null),k=R(),{user:n,updateUser:E,checkCredits:C}=M();y.useEffect(()=>{n&&_()},[n]);const _=async()=>{try{const r=v().currentUser;if(!r)return;const i=await r.getIdToken(),d=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${d}/api/subscription-status`,{headers:{Authorization:`Bearer ${i}`}});if(c.ok){const m=await c.json();U(m)}}catch(t){console.error("Failed to fetch subscription status:",t)}},j=async()=>{if(n){f(!0);try{const r=v().currentUser;if(!r)throw new Error("No Firebase user found");const i=await r.getIdToken(),d=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",c=await fetch(`${d}/api/create-portal-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({returnUrl:`${window.location.origin}/pricing`})});if(!c.ok){const o=await c.json().catch(()=>({error:"Unknown error"})),h=o.details||o.error||"Failed to create portal session";throw new Error(h)}const{url:m}=await c.json();if(!m)throw new Error("No portal URL received from server");window.location.href=m}catch(t){console.error("Portal error:",t);const r=t instanceof Error?t.message:"Failed to open subscription management. Please try again.";r.includes("mode mismatch")||r.includes("test mode")||r.includes("live mode")?alert("Stripe Configuration Error: There is a mismatch between test and live mode keys. Please contact support or check your Stripe configuration."):alert(`Failed to open subscription management: ${r}`)}finally{f(!1)}}},N=async t=>{if(!n)return;const i={free:300,pro:1500,elite:3e3}[t];try{console.log(`ðŸ”„ Resetting credits for ${t} tier to ${i}`),await E({credits:i,maxCredits:i}),C&&await C()}catch(d){console.error("Error resetting credits:",d)}},b=async(t,r)=>{if(n)try{t==="free"?(await E({tier:"free",credits:300,maxCredits:300}),k("/home")):(t==="pro"||t==="elite")&&(D(r||"pricing",{from_location:"pricing_page",plan_selected:t}),await $(t))}catch(i){console.error("Error updating user:",i)}},$=async(t="pro")=>{if(!n){console.error("User not authenticated");return}f(!0);try{const i=v().currentUser;if(!i)throw new Error("No Firebase user found");const d=await i.getIdToken(),c=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",m=t==="elite"?Y:W,o=await fetch(`${c}/api/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({priceId:m,userId:n.uid,userEmail:n.email,successUrl:`${window.location.origin}/payment-success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})});if(!o.ok){const S=await o.text();throw console.error("Checkout session creation failed:",o.status,S),new Error(`Failed to create checkout session: ${o.status} - ${S}`)}const h=await o.json();console.log("Checkout session response:",h);const P=h.sessionId;if(!P)throw console.error("No sessionId in response:",h),new Error("Invalid response from server: missing sessionId");const I=await G;if(!I)throw new Error("Stripe failed to initialize");const{error:w}=await I.redirectToCheckout({sessionId:P});w&&(console.error("Stripe redirect error:",w),alert("Payment error: "+w.message))}catch(r){console.error("Checkout error:",r);const i=r instanceof Error?r.message:"Unknown error";alert(`Something went wrong: ${i}`)}finally{f(!1)}},A=(a==null?void 0:a.tier)==="pro"&&(a==null?void 0:a.status)==="active",g=(a==null?void 0:a.tier)==="elite"&&(a==null?void 0:a.status)==="active",B=A||g,l=(a==null?void 0:a.tier)||"free";return e.jsx(O,{children:e.jsxs("div",{className:"container mx-auto px-6 py-6 max-w-7xl",children:[e.jsxs(p,{variant:"ghost",onClick:()=>k("/home"),className:"mb-8 text-gray-300 text-slate-700 hover:text-blue-400",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),B&&e.jsxs(u,{className:`mb-8 p-4 rounded-xl flex items-center justify-between ${g?"border-purple-500/30":"border-blue-500/30"}`,children:[e.jsxs("div",{children:[e.jsxs("p",{className:`font-semibold ${g?"text-purple-400":"text-blue-400"}`,children:[g?"Elite":"Pro"," Subscription Active"]}),(a==null?void 0:a.cancelAtPeriodEnd)&&e.jsxs("p",{className:"text-sm text-gray-400 text-slate-600",children:["Cancels on ",new Date(a.currentPeriodEnd*1e3).toLocaleDateString()]})]}),e.jsxs(p,{onClick:j,disabled:x,className:"btn-primary-glass",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 bg-blue-500/20 px-3 py-1 rounded-full border border-blue-500/30",children:[e.jsx(F,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-400 uppercase tracking-wide",children:"Our Pricing"})]})}),e.jsxs("h1",{className:"text-display-lg mb-6 text-white text-slate-900",children:[e.jsx("span",{className:"text-black",children:"Choose"})," ",e.jsx("span",{className:"gradient-text-teal",children:"your plan"})," ",e.jsx("span",{className:"text-black",children:"today"})]}),e.jsx("p",{className:"text-gray-400 text-slate-600 text-lg mb-8",children:"15 credits per contact. When you run out of credits, no more contacts."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-7xl w-full",children:[e.jsxs(u,{className:"rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 text-white text-slate-900",children:"Free"}),e.jsx("p",{className:"text-gray-400 text-slate-600",children:"Try it out for free"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"300 credits (~20 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Basic contact search + AI email drafts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Gmail integration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Directory saves all contacts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"3 Coffee Chat Preps + 2 Interview Preps"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Exports disabled"})]})]}),e.jsx(p,{className:"btn-secondary-glass w-full py-4 px-6 font-semibold",onClick:()=>l==="free"?N("free"):b("free","pricing_page"),children:l==="free"?"Current Plan":"Start for Free"})]}),e.jsx("div",{className:"p-[3px] rounded-2xl bg-gradient-to-r from-blue-400 via-blue-600 to-cyan-400 shadow-[0_0_40px_rgba(59,130,246,0.5)] scale-105 z-10 transform transition-all hover:scale-[1.07]",children:e.jsxs(u,{className:"relative rounded-xl h-full p-10",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30 text-xs font-medium",children:l==="pro"?"ACTIVE":"MOST POPULAR"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 gradient-text-teal",children:"Pro"}),e.jsx("p",{className:"text-gray-400 text-slate-600 mb-3",children:"Best for Students"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-400 text-slate-600 text-lg line-through mr-2",children:"$19.99"}),e.jsx("span",{className:"text-4xl font-bold text-white text-slate-900",children:"$14.99"}),e.jsx("span",{className:"text-gray-600 text-lg ml-1",children:"/month"})]}),e.jsx("p",{className:"text-gray-500",children:"1,500 credits (~100 contacts)"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"1,500 credits (~100 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700 font-bold",children:"Everything in Free, plus:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Full Firm Search"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Smart school/major/career filters"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"10 Coffee Chat Preps/month"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"5 Interview Preps/month"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited directory saving"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Bulk drafting + Export unlocked (CSV & Gmail)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: ~2,500 minutes/month"})]})]}),e.jsx(p,{className:"btn-primary-glass w-full py-6 px-6 text-lg font-semibold",onClick:x?void 0:l==="pro"?t=>{t.shiftKey?N("pro"):j()}:()=>b("pro","pricing_page"),disabled:x||l==="elite",title:l==="pro"?"Click to manage subscription. Hold Shift+Click to reset credits.":l==="elite"?"You are on Elite plan":void 0,children:x?"Processing...":l==="pro"?"Manage Subscription":l==="elite"?"On Elite Plan":"Upgrade to Pro"})]})}),e.jsxs(u,{className:`rounded-2xl p-10 transform transition-all hover:scale-[1.02] hover:glow-teal relative ${l==="elite"?"border border-purple-500/50":""}`,children:[l==="elite"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-purple-500/20 text-purple-400 border border-purple-500/30 text-xs font-medium",children:"ACTIVE"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 text-white text-slate-900",children:"Elite"}),e.jsx("p",{className:"text-gray-400 text-slate-600",children:"For serious recruiting season"})]}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("span",{className:"text-3xl font-bold text-white text-slate-900",children:"$34.99"}),e.jsx("span",{className:"text-gray-400 text-slate-600 text-lg ml-1",children:"/month"})]}),e.jsx("p",{className:"text-gray-300 text-slate-700 text-center mb-8",children:"3,000 credits (~200 contacts)"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"3,000 credits (~200 contacts)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700 font-bold",children:"Everything in Pro, plus:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited Coffee Chat Prep"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Unlimited Interview Prep"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Priority queue for contact generation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Personalized outreach templates (tailored to resume)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Weekly personalized firm insights"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Early access to new AI tools"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300 text-slate-700",children:"Estimated time saved: ~5,000 minutes/month"})]})]}),e.jsx(p,{className:"btn-secondary-glass w-full py-4 px-6 font-semibold",onClick:x?void 0:l==="elite"?t=>{t.shiftKey?N("elite"):j()}:()=>b("elite","pricing_page"),disabled:x,title:l==="elite"?"Click to manage subscription. Hold Shift+Click to reset credits.":void 0,children:x?"Processing...":l==="elite"?"Manage Subscription":"Go Elite"})]})]})})]})})};export{Z as default};
