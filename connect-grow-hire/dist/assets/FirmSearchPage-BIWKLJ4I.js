import{aG as qe,r as a,j as e,aH as Oe,aI as pe,aJ as fe,aK as ge,aL as be,aM as ye,aN as je,ad as ce,ao as Ne,aO as _e,L as Ke,W as Ye,U as Qe,O as We,aP as Ge,J as G,$ as we,aQ as Je,aR as Xe,u as Ze,aS as de,aT as ue,aU as es,aV as ss,Y as ts}from"./vendor-react-b5qb9EdN.js";import{S as rs,A as as,a as ns}from"./AppSidebar-CzbZqumK.js";import{T as os,a as is,b as me,c as xe}from"./tabs-E5q7QBeD.js";import{c as D,e as ve,B as K,a as ls,f as cs,t as L}from"./index-B_VQ6MHu.js";import{C as X,c as he,b as ds}from"./card-dt8wMOyI.js";import{a as Z}from"./api-DAvNaJNf.js";import{I as us}from"./input-JHROAKOp.js";import{P as ms}from"./PageHeaderActions-DWjEuDKF.js";const xs=qe,hs=Oe,Ce=a.forwardRef(({className:i,...n},o)=>e.jsx(je,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...n,ref:o}));Ce.displayName=je.displayName;const Se=a.forwardRef(({className:i,...n},o)=>e.jsxs(hs,{children:[e.jsx(Ce,{}),e.jsx(pe,{ref:o,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...n})]}));Se.displayName=pe.displayName;const ke=({className:i,...n})=>e.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",i),...n});ke.displayName="AlertDialogHeader";const Fe=({className:i,...n})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...n});Fe.displayName="AlertDialogFooter";const Ae=a.forwardRef(({className:i,...n},o)=>e.jsx(fe,{ref:o,className:D("text-lg font-semibold",i),...n}));Ae.displayName=fe.displayName;const Le=a.forwardRef(({className:i,...n},o)=>e.jsx(ge,{ref:o,className:D("text-sm text-muted-foreground",i),...n}));Le.displayName=ge.displayName;const De=a.forwardRef(({className:i,...n},o)=>e.jsx(ye,{ref:o,className:D(ve(),i),...n}));De.displayName=ye.displayName;const $e=a.forwardRef(({className:i,...n},o)=>e.jsx(be,{ref:o,className:D(ve({variant:"outline"}),"mt-2 sm:mt-0",i),...n}));$e.displayName=be.displayName;function ps({firms:i,onViewContacts:n,onDelete:o,deletingId:j}){const[k,M]=a.useState("employeeCount"),[g,U]=a.useState("desc"),[d,$]=a.useState(""),[h,Y]=a.useState(i);a.useEffect(()=>{if(!d.trim()){Y(i);return}const t=i.filter(l=>{var b,z,T,F,E,A,P,C,I,q,W,H;const c=d.toLowerCase();return((b=l.name)==null?void 0:b.toLowerCase().includes(c))||((z=l.industry)==null?void 0:z.toLowerCase().includes(c))||((F=(T=l.location)==null?void 0:T.display)==null?void 0:F.toLowerCase().includes(c))||((A=(E=l.location)==null?void 0:E.city)==null?void 0:A.toLowerCase().includes(c))||((C=(P=l.location)==null?void 0:P.state)==null?void 0:C.toLowerCase().includes(c))||((q=(I=l.location)==null?void 0:I.country)==null?void 0:q.toLowerCase().includes(c))||((W=l.website)==null?void 0:W.toLowerCase().includes(c))||((H=l.founded)==null?void 0:H.toString().includes(d))});Y(t)},[d,i]);const V=[...h].sort((t,l)=>{var z,T,F,E,A,P,C,I;let c,b;switch(k){case"name":c=((z=t.name)==null?void 0:z.toLowerCase())||"",b=((T=l.name)==null?void 0:T.toLowerCase())||"";break;case"location":c=((E=(F=t.location)==null?void 0:F.display)==null?void 0:E.toLowerCase())||"",b=((P=(A=l.location)==null?void 0:A.display)==null?void 0:P.toLowerCase())||"";break;case"industry":c=((C=t.industry)==null?void 0:C.toLowerCase())||"",b=((I=l.industry)==null?void 0:I.toLowerCase())||"";break;case"employeeCount":c=t.employeeCount||0,b=l.employeeCount||0;break;case"founded":c=t.founded||0,b=l.founded||0;break;default:return 0}return c<b?g==="asc"?-1:1:c>b?g==="asc"?1:-1:0}),p=t=>{k===t?U(g==="asc"?"desc":"asc"):(M(t),U("desc"))},v=({field:t})=>k!==t?null:g==="asc"?e.jsx(Je,{className:"h-4 w-4 inline-block ml-1"}):e.jsx(Xe,{className:"h-4 w-4 inline-block ml-1"}),Q=t=>{var l;return t.id||`${t.name}-${(l=t.location)==null?void 0:l.display}`},f=t=>t.employeeCount?t.employeeCount>=1e3?`${(t.employeeCount/1e3).toFixed(1)}k`:t.employeeCount.toLocaleString():t.sizeBucket?{small:"1-50",mid:"51-500",large:"500+"}[t.sizeBucket]||t.sizeBucket:"â€”";return e.jsxs("div",{className:"bg-card backdrop-blur-sm rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-border bg-muted",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-5 w-5 text-blue-400"}),e.jsxs("span",{className:"font-medium text-foreground",children:[h.length," ",h.length===1?"firm":"firms",d&&` (filtered from ${i.length})`]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "View Contacts" to find professionals at any firm'})]})}),e.jsx("div",{className:"px-6 py-4 border-b border-border bg-background",children:e.jsxs("div",{className:"relative w-80",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(us,{type:"text",placeholder:"Search firms...",value:d,onChange:t=>$(t.target.value),className:"pl-10 bg-muted border-border text-foreground placeholder-muted-foreground focus:border-primary focus:ring-primary"})]})}),h.length===0&&i.length>0&&d&&e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"No firms match your search."}),e.jsx("button",{onClick:()=>$(""),className:"text-sm text-blue-400 hover:text-blue-300 underline",children:"Clear search"})]}),h.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>p("name"),children:["Company Name",e.jsx(v,{field:"name"})]}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Website"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"LinkedIn"}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>p("location"),children:["Location",e.jsx(v,{field:"location"})]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>p("industry"),children:["Industry",e.jsx(v,{field:"industry"})]}),e.jsxs("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>p("employeeCount"),children:["Employees",e.jsx(v,{field:"employeeCount"})]}),e.jsxs("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>p("founded"),children:["Founded",e.jsx(v,{field:"founded"})]}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-background divide-y divide-border",children:V.map((t,l)=>{var c;return e.jsxs("tr",{className:"hover:bg-secondary transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-500/20 rounded-lg flex items-center justify-center border border-blue-500/30",children:e.jsx(ce,{className:"h-5 w-5 text-blue-400"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-foreground",children:t.name})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:t.website?e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:t.website,children:e.jsx(_e,{className:"h-5 w-5"})}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:t.linkedinUrl?e.jsx("a",{href:t.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:"View on LinkedIn",children:e.jsx(Ke,{className:"h-5 w-5"})}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground mr-1.5 flex-shrink-0"}),e.jsx("span",{children:((c=t.location)==null?void 0:c.display)||"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300 border border-blue-500/30 capitalize",children:t.industry||"â€”"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-foreground",children:[e.jsx(Qe,{className:"h-4 w-4 text-muted-foreground mr-1.5"}),e.jsx("span",{children:f(t)})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-foreground",children:[e.jsx(We,{className:"h-4 w-4 text-muted-foreground mr-1.5"}),e.jsx("span",{children:t.founded||"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>n(t),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-300 bg-blue-500/20 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 hover:text-blue-200 transition-colors",children:[e.jsx(Ge,{className:"h-4 w-4 mr-1.5"}),"View Contacts"]}),o&&e.jsx(K,{size:"sm",variant:"ghost",className:"text-red-300 hover:text-red-200 hover:bg-red-500/10",disabled:j===Q(t),onClick:()=>o(t),children:j===Q(t)?e.jsx(G,{className:"h-4 w-4 animate-spin"}):e.jsx(we,{className:"h-4 w-4"})})]})})]},t.id||l)})})]})}),h.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-border bg-muted",children:e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:'Click on column headers to sort â€¢ Click "View Contacts" to find professionals at any firm'})})]})}const fs=["Investment banks in New York focused on healthcare M&A","Mid-sized consulting firms in San Francisco","Venture capital firms in Boston focused on biotech","Large private equity firms in Chicago","Software companies in Austin with 50-200 employees"],ks=()=>{var se;const i=Ze(),{user:n,checkCredits:o}=ls(),j=n||{credits:0,tier:"free"},[k,M]=a.useState(""),[g,U]=a.useState(!1),[d,$]=a.useState([]),[h,Y]=a.useState(null),[V,p]=a.useState(null),[v,Q]=a.useState(!1),[f,t]=a.useState(null),[l,c]=a.useState(!1),[b,z]=a.useState([]),[T,F]=a.useState(!1),[E,A]=a.useState("firm-search"),[P,C]=a.useState(!0),[I,q]=a.useState(null),[W,H]=a.useState(!1),[N,ze]=a.useState(10),[Te]=a.useState([5,10,20,40]),[B]=a.useState(5);a.useEffect(()=>{o&&n&&o()},[N,o,n]),a.useCallback(async()=>{if(!n){C(!1);return}C(!0);try{console.log("ðŸ“¥ Loading saved firms from Firebase...");const s=await Z.getFirmSearchHistory(10,!0),u=[],x=new Set;s.forEach(y=>{y.results&&Array.isArray(y.results)&&y.results.forEach(r=>{var S;const m=r.id||`${r.name}-${(S=r.location)==null?void 0:S.display}`;x.has(m)||(x.add(m),u.push(r))})}),console.log(`âœ… Loaded ${u.length} unique firms from ${s.length} recent searches`),$(u)}catch(s){console.error("âŒ Failed to load saved firms:",s)}finally{C(!1)}},[n]);const J=a.useCallback(async()=>{if(n){F(!0);try{const s=await Z.getFirmSearchHistory(10);z(s)}catch(s){console.error("Failed to load search history:",s)}finally{F(!1)}}},[n]);a.useEffect(()=>{J(),o&&o()},[J,o]);const O=async s=>{const u=s||k;if(!u.trim()){p("Please enter a search query");return}U(!0),p(null),Q(!0);const x=2+Math.ceil(N/5)*2,y=x<60?`${x} seconds`:`${Math.ceil(x/60)} minutes`;t({current:0,total:N,step:`Generating firm names... (est. ${y})`});try{const r=await Z.searchFirms(u,N);if(t(null),r.success){if(Y(r.parsedFilters),r.firms.length===0)p("No firms found matching your criteria. Try broadening your search or adjusting the location/industry.");else{const m=r.firms;$(m);const S=r.partialMessage?`${r.partialMessage} Used ${r.creditsCharged||0} credits.`:`Found ${r.firms.length} firm${r.firms.length!==1?"s":""}. Used ${r.creditsCharged||0} credits.`;L({title:r.partialMessage?"Partial Results":"Search Complete!",description:S,variant:(r.partialMessage,"default")}),o&&await o(),A("firm-library")}J()}else r.insufficientCredits?(p(r.error||"Insufficient credits"),L({title:"Insufficient Credits",description:`You need ${r.creditsNeeded} credits but only have ${r.currentCredits}. Please upgrade your plan or reduce batch size.`,variant:"destructive"})):p(r.error||"Search failed. Please try again.")}catch(r){if(console.error("Search error:",r),r.status===402||r.error_code==="INSUFFICIENT_CREDITS"){const m=r.creditsNeeded||r.required||N*B,S=r.currentCredits||r.available||j.credits||0;p(`Insufficient credits. You need ${m} credits but only have ${S}.`),L({title:"Insufficient Credits",description:`You need ${m} credits but only have ${S}. Please upgrade your plan or reduce batch size.`,variant:"destructive"}),o&&await o()}else if(r.status===502||r.error_code==="EXTERNAL_API_ERROR"){const m=r.message||"The search service is temporarily unavailable. Please try again in a few minutes.";p(m),L({title:"Service Temporarily Unavailable",description:m,variant:"destructive"})}else p(r.message||"An unexpected error occurred. Please try again."),L({title:"Search Failed",description:r.message||"An error occurred. Please try again.",variant:"destructive"})}finally{U(!1),t(null)}},Ee=s=>{var x,y;const u=new URLSearchParams;if(u.set("company",s.name),(x=s.location)!=null&&x.display)u.set("location",s.location.display);else if((y=s.location)!=null&&y.city){const r=[s.location.city,s.location.state,s.location.country].filter(Boolean);u.set("location",r.join(", "))}i(`/contact-search?${u.toString()}`)},ee=s=>{var u;return s.id||`${s.name}-${(u=s.location)==null?void 0:u.display}`},Ie=async s=>{const u=ee(s);q(u);try{$(x=>x.filter(y=>ee(y)!==u)),L({title:"Firm deleted",description:"Removed from your Firm Library."})}catch(x){L({title:"Delete failed",description:x instanceof Error?x.message:"Please try again.",variant:"destructive"})}finally{q(null)}},Re=()=>{const s=d.length;$([]),H(!1),L({title:"All firms deleted",description:`Removed ${s} firm${s!==1?"s":""} from your Firm Library.`})},Pe=s=>{M(s.query),c(!1),O(s.query)},He=s=>{M(s),O(s)},Be=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),O())},Me=()=>{if(!d||d.length===0)return;const u=["Company Name","Website","LinkedIn","Location","Industry","Employees","Founded"].join(","),x=d.map(w=>{var te,re,ae,ne,oe,ie;const R=le=>{if(!le)return"";const _=String(le);return _.includes(",")||_.includes('"')||_.includes(`
`)?`"${_.replace(/"/g,'""')}"`:_},Ve=((te=w.location)==null?void 0:te.display)||[(re=w.location)==null?void 0:re.city,(ae=w.location)==null?void 0:ae.state,(ne=w.location)==null?void 0:ne.country].filter(Boolean).join(", ");return[R(w.name),R(w.website),R(w.linkedinUrl),R(Ve),R(w.industry),R((oe=w.employeeCount)==null?void 0:oe.toString()),R((ie=w.founded)==null?void 0:ie.toString())].join(",")}),y=[u,...x].join(`
`),r=new Blob([y],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),S=URL.createObjectURL(r);m.setAttribute("href",S),m.setAttribute("download",`firms_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Ue=((j==null?void 0:j.tier)==="pro"?"pro":"free")==="free"?10:40;return e.jsx(rs,{className:"bg-transparent",children:e.jsxs("div",{className:"flex min-h-screen w-full bg-transparent text-foreground",children:[e.jsx(as,{}),e.jsxs("div",{className:"flex-1 bg-transparent",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between border-b border-gray-100/30 px-6 bg-transparent shadow-sm relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ns,{className:"text-foreground hover:bg-secondary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Firm Search"})]}),e.jsx(ms,{})]}),e.jsx("main",{className:"p-8 bg-transparent",children:e.jsx("div",{className:"max-w-7xl mx-auto bg-transparent",children:e.jsxs(os,{value:E,onValueChange:A,className:"w-full bg-transparent",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(is,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(me,{value:"firm-search",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"}),"Firm Search"]}),e.jsxs(me,{value:"firm-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),"Firm Library (",d.length,")"]})]})}),e.jsx(xe,{value:"firm-search",className:"bg-transparent",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsx(X,{className:"bg-white border-border shadow-sm rounded-2xl",children:e.jsxs(he,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Firm Search"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discover companies that match your career interests."})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ds,{className:"text-xl text-foreground",children:"Describe the firms you're looking for"}),e.jsxs(K,{variant:"outline",size:"sm",onClick:()=>c(!l),className:"border-input text-foreground hover:bg-secondary",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"History"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:k,onChange:s=>M(s.target.value),onKeyDown:Be,placeholder:"e.g., Mid-sized investment banks in New York focused on healthcare M&A...",rows:4,className:"min-h-[120px] w-full rounded-xl bg-white border border-input px-4 py-3 text-sm text-foreground placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:border-transparent resize-none disabled:opacity-50",disabled:g}),e.jsx("button",{onClick:()=>O(),disabled:g||!k.trim(),className:"absolute bottom-3 right-3 p-2 bg-primary rounded-full hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:g?e.jsx(G,{className:"h-5 w-5 animate-spin text-white"}):e.jsx(es,{className:"h-5 w-5 text-white"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Include ",e.jsx("span",{className:"text-destructive",children:"*industry*"})," (required), ",e.jsx("span",{className:"text-destructive",children:"*location*"})," (required), and optionally size, focus areas, and any key words you want for best results."]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Firm Batch Size"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how many firms to pull per search."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/50 p-1 border border-input",children:Te.map(s=>e.jsx("button",{type:"button",onClick:()=>ze(s),disabled:g||s>Ue,className:`px-3 py-1.5 text-xs font-medium rounded-full transition ${N===s?"text-white":"text-muted-foreground hover:text-foreground"} disabled:opacity-50 disabled:cursor-not-allowed`,style:N===s?{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"}:void 0,children:s},s))}),e.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[e.jsxs("div",{className:"font-medium text-foreground",children:[N*B," credits"]}),e.jsxs("div",{className:"text-[11px] text-muted-foreground",children:[B," credits per firm"]})]})]})]}),j.credits!==void 0&&j.credits<N*B&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-red-400 flex items-start gap-2",children:[e.jsx("span",{children:"âš ï¸ Warning:"}),e.jsxs("span",{children:["Insufficient credits. You need ",N*B," credits but only have ",j.credits,"."]})]})}),e.jsx(K,{onClick:()=>O(),disabled:g||!k.trim()||(j.credits??0)<N*B,className:"w-full h-12 text-white font-semibold",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:g?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-4 w-4 mr-2 animate-spin"}),(f==null?void 0:f.step)||"Searching..."]}):"Search Firms"})]}),!v&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Examples you can try"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click an example to fill in the search description."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:fs.map((s,u)=>e.jsx("button",{type:"button",onClick:()=>He(s),className:"whitespace-nowrap rounded-full border border-border bg-white px-3 py-1.5 text-xs text-foreground hover:bg-secondary hover:text-foreground transition-colors",children:s},u))})]})]})}),V&&e.jsxs("div",{className:"p-4 bg-red-900/30 border border-red-500/50 rounded-lg flex items-start space-x-3",children:[e.jsx(ss,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-red-200",children:V})})]}),h&&v&&!V&&e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-500/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-medium",children:"Searching for:"})," ",h.size&&h.size!=="none"&&e.jsxs("span",{className:"capitalize",children:[h.size,"-sized "]}),e.jsx("span",{className:"capitalize",children:h.industry})," firms in"," ",e.jsx("span",{children:h.location}),((se=h.keywords)==null?void 0:se.length)>0&&e.jsxs("span",{children:[" focused on ",h.keywords.join(", ")]})]})}),g&&e.jsx(X,{className:"bg-white border-border",children:e.jsxs(he,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:(f==null?void 0:f.step)||"Searching..."}),f&&e.jsxs("span",{className:"text-muted-foreground",children:[f.current,"/",f.total]})]}),f&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.current/f.total*100}%`}})})]}),e.jsx(cs,{variant:"card",count:3})]})}),v&&!g&&d.length>0&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-600",children:[e.jsxs("span",{className:"font-medium",children:["âœ“ Found ",d.length," firms!"]}),' Switch to the "Firm Library" tab to view results and export to CSV.']})})]})}),e.jsx(xe,{value:"firm-library",className:"!bg-white",children:e.jsxs("div",{className:"space-y-4",children:[d.length>0&&e.jsxs("div",{className:"flex justify-between items-center bg-white rounded-lg border border-border p-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:[d.length," firm",d.length!==1?"s":""," saved"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Export your results to CSV for further analysis"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{onClick:()=>H(!0),variant:"outline",className:"gap-2 border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700",children:[e.jsx(we,{className:"h-4 w-4"}),"Delete All"]}),e.jsxs(K,{onClick:Me,className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(ts,{className:"h-4 w-4"}),"Export CSV"]})]})]}),d.length>0?e.jsx(ps,{firms:d,onViewContacts:Ee,onDelete:Ie,deletingId:I}):e.jsxs(X,{className:"bg-white border-border p-12 text-center",children:[e.jsx(de,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-foreground mb-2",children:"No firms to display yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Switch to the "Firm Search" tab to find companies'})]})]})})]})})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-xl border-l border-border z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Search History"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 text-muted-foreground hover:text-foreground rounded-lg hover:bg-secondary",children:"âœ•"})]}),e.jsx("div",{className:"overflow-y-auto h-full pb-20",children:T?e.jsx("div",{className:"p-8 text-center",children:e.jsx(G,{className:"h-6 w-6 text-muted-foreground animate-spin mx-auto"})}):b.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ue,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No search history yet"})]}):e.jsx("div",{className:"divide-y divide-border",children:b.map(s=>e.jsxs("button",{onClick:()=>Pe(s),className:"w-full p-4 text-left hover:bg-secondary transition-colors",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-2",children:s.query}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.resultsCount," firms found"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]})]},s.id))})})]}),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>c(!1)})]}),e.jsx(xs,{open:W,onOpenChange:H,children:e.jsxs(Se,{children:[e.jsxs(ke,{children:[e.jsx(Ae,{children:"Delete All Firms?"}),e.jsxs(Le,{children:["This will permanently remove all ",d.length," firm",d.length!==1?"s":""," from your Firm Library. This action cannot be undone."]})]}),e.jsxs(Fe,{children:[e.jsx($e,{children:"Cancel"}),e.jsx(De,{onClick:Re,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete All"})]})]})})]})})};export{ks as default};
