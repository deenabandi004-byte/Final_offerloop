const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DlXH6OO2.js","assets/vendor-react-Bye97upB.js","assets/vendor-utils-B2rm_Apj.js","assets/vendor-dates-CPvpAlHY.js","assets/vendor-firebase-Bz1e_Tmy.js","assets/vendor-animations-CH_iu5NA.js","assets/index-BSrx6Tbf.css"])))=>i.map(i=>d[i]);
import{c as Re,u as nt,B as M,a as ze,b as ve,t as F,d as ot,f as lt,_ as pe}from"./index-DlXH6OO2.js";import{r as a,j as e,aE as Me,aF as it,O as ue,as as ct,aq as Be,u as Oe,a0 as Ge,aG as Fe,a3 as he,X as De,k as Te,aH as Ae,a5 as dt,aA as mt,ay as ut,K as Ee}from"./vendor-react-Bye97upB.js";import{S as ht,A as xt,a as pt}from"./AppSidebar-BDehlPBm.js";import{T as ft,a as gt,b as fe,c as ge}from"./tabs-BKIyP4W7.js";import{C as re,a as Ve,b as qe,c as ne}from"./card-Oe13TMu0.js";import{S as bt}from"./ContactDirectory-BmKnv8MT.js";import{I as jt}from"./input-BsyuEDo1.js";import{C as vt,b as wt,d as Nt,e as yt}from"./command-DaT5oLXh.js";import{P as St,a as Ct,b as kt}from"./popover-Cq5kWw5l.js";import{a as we,i as _t}from"./api-Cs6ol7d5.js";import{f as Pe}from"./firebaseApi-DU162AUl.js";import{T as Ue}from"./constants-BVoUACx7.js";import{e as $e,l as Le}from"./activityLogger-DokJbVCc.js";import{P as It}from"./PageHeaderActions-Ci5Om_Q5.js";import{d as Ft,e as Dt}from"./vendor-firebase-Bz1e_Tmy.js";import{T as Tt}from"./textarea-DJfZuYne.js";import{L as At,S as Et,a as Pt,b as Ut,c as $t,d as Lt}from"./select-DaEaeXXz.js";import{d as be,a as Rt}from"./analytics-BfdMicsw.js";import{A as zt,a as Mt,b as Bt,c as Ot,d as Gt,e as Vt,f as qt,g as Jt}from"./alert-dialog-KUAtmkvf.js";const Je=a.forwardRef(({className:n,value:y,...S},$)=>e.jsx(Me,{ref:$,className:Re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...S,children:e.jsx(it,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(y||0)}%)`}})}));Je.displayName=Me.displayName;function Yt(n,y){const[S,$]=a.useState(n);return a.useEffect(()=>{const p=setTimeout(()=>{$(n)},y);return()=>{clearTimeout(p)}},[n,y]),S}const Ht=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",Kt=(n,y,S=!0)=>{const[$,p]=a.useState([]),[B,f]=a.useState(!1),[i,v]=a.useState(null),g=Yt(y,300);return a.useEffect(()=>{if(!S||!g||g.length<2){p([]),v(null);return}(async()=>{f(!0),v(null);try{const m=await fetch(`${Ht}/api/autocomplete/${n}?query=${encodeURIComponent(g)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const I=await m.json();if(I.error)throw new Error(I.error);p(I.suggestions||[])}catch(m){console.error("Autocomplete error:",m),v(m instanceof Error?m.message:"Unknown error"),p([])}finally{f(!1)}})()},[n,g,S]),{suggestions:$,isLoading:B,error:i}},me=({value:n,onChange:y,placeholder:S,dataType:$,disabled:p=!1,className:B})=>{const[f,i]=a.useState(!1),[v,g]=a.useState(n),D=a.useRef(null),{suggestions:m,isLoading:I,error:c}=Kt($,v,f);a.useEffect(()=>{g(n)},[n]);const x=C=>{const T=C.target.value;g(T),y(T),T.length>=2&&!p?i(!0):i(!1)},E=C=>{var T;g(C),y(C),i(!1),(T=D.current)==null||T.blur()},b=()=>{v.length>=2&&!p&&i(!0)},h=()=>{setTimeout(()=>i(!1),150)},O=C=>{var T;C.key==="Escape"&&(i(!1),(T=D.current)==null||T.blur())},G=f&&!p&&v.length>=2,se=I||m.length>0||!!c;return e.jsx("div",{className:"relative",children:e.jsxs(St,{open:!!(G&&se),children:[e.jsx(Ct,{asChild:!0,children:e.jsx("div",{children:e.jsx(jt,{ref:D,value:v,onChange:x,onFocus:b,onBlur:h,onKeyDown:O,placeholder:S,disabled:p,className:Re(B,G&&"rounded-b-none")})})}),e.jsx(kt,{className:"w-full p-0 mt-0 rounded-t-none border-t-0",align:"start",side:"bottom",sideOffset:-1,onOpenAutoFocus:C=>C.preventDefault(),children:e.jsx(vt,{children:e.jsxs(wt,{className:"max-h-48",children:[I&&e.jsxs("div",{className:"flex items-center justify-center p-4 text-sm text-muted-foreground",children:[e.jsx(ue,{className:"h-4 w-4 animate-spin mr-2"}),"Loading suggestions..."]}),c&&e.jsxs("div",{className:"p-4 text-sm text-destructive",children:["Error loading suggestions: ",c]}),!I&&!c&&m.length===0&&v.length>=2&&e.jsxs("div",{className:"p-4 text-sm text-muted-foreground",children:['No suggestions found for "',v,'"']}),!I&&!c&&m.length>0&&e.jsx(Nt,{children:m.slice(0,8).map((C,T)=>e.jsx(yt,{value:C,onSelect:()=>E(C),className:"cursor-pointer hover:bg-secondary",children:e.jsx("span",{className:"truncate",children:C})},`${C}-${T}`))})]})})})]})})},Xt=["Find USC alumni in investment banking at Goldman in NYC","Software engineers at Google in San Francisco","Product managers at Meta in Seattle","Consultants at McKinsey who went to Harvard"],Wt=({onSearchComplete:n,onSearchStart:y,userTier:S="free",userCredits:$=0})=>{const[p,B]=a.useState(""),[f,i]=a.useState(1),[v,g]=a.useState(!1),[D,m]=a.useState(null),{toast:I}=nt(),c=a.useMemo(()=>{const b=S==="free"?3:S==="pro"?8:15,h=Math.floor(($??0)/15);return Math.min(b,h)},[S,$]);a.useEffect(()=>{f>c&&i(Math.max(1,c))},[c,f]);const x=async b=>{if(b.preventDefault(),!(!p.trim()||v)){g(!0),y==null||y(),m(null);try{const h=await we.promptSearch(p.trim(),f);if("error"in h){I({title:"Search failed",description:h.error,variant:"destructive"}),g(!1);return}m(h),h.contacts.length===0?I({title:"No contacts found",description:"Try using broader search terms or removing some filters",variant:"destructive"}):I({title:"Search complete!",description:`Found ${h.contacts.length} contacts`}),n==null||n(h.contacts,h.parsed_query)}catch(h){console.error("Error running search:",h),I({title:"Error",description:h.message||"Failed to run search. Please try again.",variant:"destructive"})}finally{g(!1)}}},E=b=>{const h=[];return b.job_title&&h.push(b.job_title),b.company&&h.push(`at ${b.company}`),b.location&&h.push(`in ${b.location}`),b.school&&h.push(`(${b.school} alumni)`),h.join(" ")||"No filters extracted"};return e.jsx("div",{className:"w-full space-y-4",children:e.jsxs(re,{className:"w-full",children:[e.jsxs(Ve,{children:[e.jsxs(qe,{className:"text-xl flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-primary"}),"Prompt Search"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe who you want to reach in natural language"})]}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(At,{htmlFor:"prompt-input",className:"text-sm font-medium",children:"Search Prompt"}),e.jsx(Tt,{id:"prompt-input",placeholder:"e.g., Find USC alumni working as product managers at Google in San Francisco",value:p,onChange:b=>B(b.target.value),className:"min-h-[100px] resize-none",disabled:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Try these examples:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Xt.map((b,h)=>e.jsx("button",{type:"button",onClick:()=>B(b),className:"text-xs px-3 py-1.5 rounded-full border border-border hover:border-primary/50 text-muted-foreground hover:text-foreground transition-colors",disabled:v,children:b},h))})]}),e.jsxs("div",{className:"col-span-1 lg:col-span-2 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Email Batch Size"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"- Choose how many contacts to generate per search"})]}),e.jsx("div",{className:"bg-muted/30 rounded-xl p-4 sm:p-6 border border-border shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-blue-400/40 rounded-xl px-4 py-3 min-w-[60px] sm:min-w-[70px] text-center shadow-inner",children:e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent",children:f})}),e.jsx("div",{className:"flex-1 w-full sm:max-w-[320px] pt-2 sm:pt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"range",min:"1",max:c,value:f,onChange:b=>i(Number(b.target.value)),disabled:v||c<1,className:`w-full h-3 bg-gray-700/50 rounded-full appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed 
                          [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-7 [&::-webkit-slider-thumb]:h-7 
                          [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white
                          [&::-webkit-slider-thumb]:shadow-[0_0_20px_rgba(59,130,246,0.6)] 
                          [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-blue-400
                          [&::-webkit-slider-thumb]:hover:shadow-[0_0_25px_rgba(59,130,246,0.8)] 
                          [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200
                          [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:w-7 [&::-moz-range-thumb]:h-7 
                          [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-white
                          [&::-moz-range-thumb]:shadow-[0_0_20px_rgba(59,130,246,0.6)] 
                          [&::-moz-range-thumb]:border-2 [&::-moz-range-thumb]:border-blue-400`,style:{background:`linear-gradient(to right, 
                            rgba(59, 130, 246, 0.8) 0%, 
                            rgba(96, 165, 250, 0.8) ${c>1?(f-1)/(c-1)*100:0}%, 
                            rgba(55, 65, 81, 0.3) ${c>1?(f-1)/(c-1)*100:0}%, 
                            rgba(55, 65, 81, 0.3) 100%)`}}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-3 font-medium",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:c})]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-xl px-4 py-3 min-w-[80px] sm:min-w-[100px] w-full sm:w-auto border border-blue-400/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xl font-bold text-blue-600",children:f*15}),e.jsx("span",{className:"text-sm text-blue-600/70 ml-2",children:"credits"})]})})]})}),c<(S==="free"?3:S==="pro"?8:15)&&e.jsx("div",{className:"mt-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-700 flex items-start gap-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsxs("span",{children:["Limited by available credits. Maximum: ",c," contacts."]})]})})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:!p.trim()||v,size:"lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Search Contacts"]})})]}),D&&e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg border border-border",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Searched for:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E(D.parsed_query)}),D.count>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Found ",D.count," contact",D.count!==1?"s":""]})]})})]})]})})},je=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",Zt=[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"},{value:"linkedinUrl",label:"LinkedIn URL"},{value:"company",label:"Company"},{value:"jobTitle",label:"Job Title"},{value:"college",label:"College/University"},{value:"location",label:"Location"},{value:"phone",label:"Phone"},{value:"_skip",label:"(Skip this column)"}],Qt=({onImportComplete:n})=>{const{user:y,updateCredits:S}=ze(),$=Oe(),[p,B]=a.useState(null),[f,i]=a.useState(!1),[v,g]=a.useState(!1),[D,m]=a.useState(null),[I,c]=a.useState("upload"),[x,E]=a.useState(null),[b,h]=a.useState({}),[O,G]=a.useState(null),[se,C]=a.useState(!1),T=async()=>{const o=ve.currentUser;if(!o)throw new Error("Not authenticated");return await o.getIdToken(!0)},Z=a.useCallback(o=>{o.preventDefault(),i(!0)},[]),le=a.useCallback(o=>{o.preventDefault(),i(!1)},[]),K=a.useCallback(o=>{o.preventDefault(),i(!1);const u=o.dataTransfer.files[0];u&&P(u)},[]),ae=a.useCallback(o=>{var w;const u=(w=o.target.files)==null?void 0:w[0];u&&P(u)},[]),P=o=>{const u=[".csv",".xlsx",".xls"],w=o.name.toLowerCase().slice(o.name.lastIndexOf("."));if(!u.includes(w)){m("Please upload a CSV or Excel file (.csv, .xlsx, .xls)");return}m(null),B(o)},X=async()=>{if(!(!p||!y)){g(!0),m(null);try{const o=await T(),u=new FormData;u.append("file",p);const w=await fetch(`${je}/api/contacts/import/preview`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:u}),A=await w.json();if(!w.ok){if(A.upgrade_required){C(!0);return}throw new Error(A.error||"Failed to preview file")}E(A),h(A.column_mapping),c("preview")}catch(o){m(o.message||"Failed to preview file")}finally{g(!1)}}},ie=async()=>{var o;if(!(!p||!y||!x)){g(!0),m(null);try{const u=await T(),w=new FormData;w.append("file",p),w.append("column_mapping",JSON.stringify(b));const A=await fetch(`${je}/api/contacts/import`,{method:"POST",headers:{Authorization:`Bearer ${u}`},body:w}),R=await A.json();if(!A.ok){if(R.upgrade_required){C(!0);return}throw new Error(R.error||"Failed to import contacts")}G(R),c("result"),S&&((o=R.credits)==null?void 0:o.remaining)!==void 0&&await S(R.credits.remaining),n&&n()}catch(u){m(u.message||"Failed to import contacts")}finally{g(!1)}}},k=async()=>{if(y)try{const o=await T(),u=await fetch(`${je}/api/contacts/import/template`,{headers:{Authorization:`Bearer ${o}`}});if(!u.ok)throw new Error("Failed to download template");const w=await u.blob(),A=window.URL.createObjectURL(w),R=document.createElement("a");R.href=A,R.download="contact_import_template.csv",document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(A)}catch(o){m(o.message||"Failed to download template")}},Q=(o,u)=>{h(w=>{const A={...w};return u==="_skip"?delete A[o]:A[o]=u,A})},V=()=>{B(null),E(null),h({}),G(null),m(null),c("upload")};return I==="upload"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Import Contacts"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload a CSV or Excel file to add contacts to your library"})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:k,className:"gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Download Template"]})]}),e.jsxs("div",{onDragOver:Z,onDragLeave:le,onDrop:K,className:`
            border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer
            ${f?"border-blue-500 bg-blue-500/10":"border-border hover:border-blue-400 hover:bg-muted/50"}
          `,onClick:()=>{var o;return(o=document.getElementById("file-upload"))==null?void 0:o.click()},children:[e.jsx(Fe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-foreground font-medium mb-2",children:p?p.name:"Drop your spreadsheet here"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"or click to browse"}),e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:ae,className:"hidden",id:"file-upload"}),e.jsxs(M,{variant:"outline",className:"pointer-events-none",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Choose File"]})]}),p&&e.jsxs("div",{className:"flex items-center justify-between bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:p.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(p.size/1024).toFixed(1)," KB"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>B(null),children:e.jsx(De,{className:"h-4 w-4"})}),e.jsxs(M,{onClick:X,disabled:v,className:"text-white",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:[v?e.jsx(ue,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Preview Import"]})]})]}),D&&e.jsxs("div",{className:"flex items-center gap-2 bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-lg",children:[e.jsx(Ae,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{children:D})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Import Guidelines"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ Each contact costs 15 credits to import"}),e.jsx("li",{children:"â€¢ Duplicates (matching email or LinkedIn) are automatically skipped"}),e.jsx("li",{children:"â€¢ Contacts must have at least a name, email, or LinkedIn URL"}),e.jsx("li",{children:"â€¢ Supported formats: CSV, XLSX, XLS"})]})]}),e.jsx(zt,{open:se,onOpenChange:C,children:e.jsxs(Mt,{children:[e.jsxs(Bt,{children:[e.jsx(Ot,{children:"Upgrade to Import Contacts"}),e.jsx(Gt,{children:"Contact import is available for Pro and Elite tier users. Upgrade your plan to import contacts from spreadsheets."})]}),e.jsxs(Vt,{children:[e.jsx(qt,{children:"Cancel"}),e.jsx(Jt,{onClick:()=>$("/pricing"),className:"text-white",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:"Upgrade to Pro/Elite"})]})]})})]}):I==="preview"&&x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Preview Import"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review column mappings and confirm import"})]}),e.jsxs(M,{variant:"outline",onClick:V,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.total_rows}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total rows"})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-green-500",children:x.valid_rows}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid contacts"})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-500",children:x.credits.available}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Credits available"})]})]}),e.jsx("div",{className:`rounded-lg p-4 ${x.credits.can_afford?"bg-blue-500/10 border border-blue-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:`h-5 w-5 ${x.credits.can_afford?"text-blue-500":"text-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:x.credits.can_afford?`This import will use ${x.credits.total_cost} credits`:"Not enough credits for all contacts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.credits.can_afford?`${x.valid_rows} contacts Ã— ${x.credits.cost_per_contact} credits each`:`You can import up to ${x.credits.max_affordable} contacts with your current credits`})]})]})}),e.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border bg-muted",children:[e.jsx("h3",{className:"font-medium text-foreground",children:"Column Mapping"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Adjust how your spreadsheet columns map to contact fields"})]}),e.jsx("div",{className:"p-4 space-y-3",children:x.headers.map((o,u)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-1/3",children:e.jsx("p",{className:"text-sm font-medium text-foreground truncate",title:o,children:o||`(Column ${u+1})`})}),e.jsx(Te,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("div",{className:"w-1/2",children:e.jsxs(Et,{value:b[u.toString()]||"_skip",onValueChange:w=>Q(u.toString(),w),children:[e.jsx(Pt,{className:"w-full",children:e.jsx(Ut,{placeholder:"Select field..."})}),e.jsx($t,{children:Zt.map(w=>e.jsx(Lt,{value:w.value,children:w.label},w.value))})]})})]},u))})]}),x.sample_contacts.length>0&&e.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border bg-muted",children:[e.jsx("h3",{className:"font-medium text-foreground",children:"Sample Preview"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["First ",x.sample_contacts.length," contacts"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Company"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Title"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:x.sample_contacts.map((o,u)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2 text-sm text-foreground",children:[o.firstName," ",o.lastName]}),e.jsx("td",{className:"px-4 py-2 text-sm text-foreground",children:o.email||"â€”"}),e.jsx("td",{className:"px-4 py-2 text-sm text-foreground",children:o.company||"â€”"}),e.jsx("td",{className:"px-4 py-2 text-sm text-foreground",children:o.jobTitle||"â€”"})]},u))})]})})]}),D&&e.jsxs("div",{className:"flex items-center gap-2 bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-lg",children:[e.jsx(Ae,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{children:D})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",onClick:V,children:"Cancel"}),e.jsxs(M,{onClick:ie,disabled:v||x.valid_rows===0,className:"text-white",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:[v?e.jsx(ue,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(he,{className:"h-4 w-4 mr-2"}),"Import ",x.credits.can_afford?x.valid_rows:x.credits.max_affordable," Contacts"]})]})]}):I==="result"&&O?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500/20 rounded-full mb-4",children:e.jsx(mt,{className:"h-8 w-8 text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Import Complete!"}),e.jsxs("p",{className:"text-muted-foreground",children:["Successfully imported ",O.created," contacts"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-500",children:O.created}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Imported"})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:O.skipped.duplicate}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duplicates"})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:O.skipped.invalid}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Invalid"})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-500",children:O.credits.remaining}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Credits Left"})]})]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Credits spent"}),e.jsx("span",{className:"font-medium text-foreground",children:O.credits.spent})]})}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx(M,{variant:"outline",onClick:V,children:"Import More"}),e.jsx(M,{onClick:()=>{n&&n()},className:"text-white",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:"View Contact Library"})]})]}):null},js=()=>{const{user:n,checkCredits:y,updateCredits:S}=ze(),$=Oe(),[p,B]=ut(),f=n||{credits:0,maxCredits:0,name:"User",email:"user@example.com",tier:"free"},i=a.useMemo(()=>{const t=f==null?void 0:f.tier;return t==="pro"||t==="elite"?t:"free"},[f==null?void 0:f.tier]);function v(t){return t&&Array.isArray(t.contacts)}const[g,D]=a.useState(""),[m,I]=a.useState(""),[c,x]=a.useState(""),[E,b]=a.useState(""),[h,O]=a.useState(null),[G,se]=a.useState(null),[C,T]=a.useState(null),[Z,le]=a.useState(!1),[K,ae]=a.useState(null),[P,X]=a.useState(!1),[ie,k]=a.useState(0),[Q,V]=a.useState(!1),[o,u]=a.useState([]),[w,A]=a.useState(null),R=o.length>0,[W,Ne]=a.useState(1),Y=a.useMemo(()=>{const t=i==="free"?3:i==="pro"?8:15,r=Math.floor((f.credits??0)/15);return Math.min(t,r)},[i,f.credits]);a.useEffect(()=>{W>Y&&Ne(Math.max(1,Y))},[Y,W]);const[ee,ye]=a.useState(null),[Ye,xe]=a.useState("contact-search"),[oe,Se]=a.useState("traditional"),Ce=Ue[i]||Ue.free;a.useEffect(()=>{const t=p.get("company"),r=p.get("location");(t||r)&&(t&&I(t),r&&x(r),B({},{replace:!0}),F({title:"Search pre-filled",description:`Finding contacts at ${t||"this company"}`}))},[]);const He=t=>Object.fromEntries(Object.entries(t).filter(([,r])=>r!==void 0)),ke=a.useCallback(async()=>{if(!n)return null;try{if(n!=null&&n.uid){const s=await Pe.getProfessionalInfo(n.uid);if(s)return{name:`${s.firstName||""} ${s.lastName||""}`.trim()||n.name||"",university:s.university||"",major:s.fieldOfStudy||"",year:s.graduationYear||"",graduationYear:s.graduationYear||"",degree:s.currentDegree||"",careerInterests:s.targetIndustries||[]}}const t=localStorage.getItem("professionalInfo"),r=localStorage.getItem("resumeData"),l=t?JSON.parse(t):{},j=r?JSON.parse(r):{};return{name:`${l.firstName||""} ${l.lastName||""}`.trim()||j.name||n.name||"",university:l.university||j.university||"",major:l.fieldOfStudy||j.major||"",year:l.graduationYear||j.year||"",graduationYear:l.graduationYear||j.year||"",degree:l.currentDegree||j.degree||"",careerInterests:l.targetIndustries||[]}}catch{return null}},[n]),ce=async(t,r)=>{if(n)try{const l=new Date().toLocaleDateString("en-US"),j=t.map(s=>{const _=[s.City??"",s.State??""].filter(Boolean).join(", ")||s.location||r||"";return He({firstName:s.FirstName??s.firstName??"",lastName:s.LastName??s.lastName??"",linkedinUrl:s.LinkedIn??s.linkedinUrl??"",email:s.Email??s.email??"",company:s.Company??s.company??"",jobTitle:s.Title??s.jobTitle??"",college:s.College??s.college??"",location:_,firstContactDate:l,status:"Not Contacted",lastContactDate:l,emailSubject:s.email_subject??s.emailSubject??void 0,emailBody:s.email_body??s.emailBody??void 0,gmailThreadId:s.gmailThreadId??s.gmail_thread_id??void 0,gmailMessageId:s.gmailMessageId??s.gmail_message_id??void 0,gmailDraftId:s.gmailDraftId??s.gmail_draft_id??void 0,gmailDraftUrl:s.gmailDraftUrl??s.gmail_draft_url??void 0,hasUnreadReply:!1,notificationsMuted:!1})});await Pe.bulkCreateContacts(n.uid,j)}catch(l){throw l}},Ke=async()=>{try{if(!n)return!1;const{auth:t}=await pe(async()=>{const{auth:z}=await import("./index-DlXH6OO2.js").then(function(H){return H.j});return{auth:z}},__vite__mapDeps([0,1,2,3,4,5,6])),r=t.currentUser;if(!r)return!1;const l=await r.getIdToken(!0),j=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",s=await fetch(`${j}/api/google/gmail/status`,{headers:{Authorization:`Bearer ${l}`}});return s.ok?!(await s.json()).connected:!0}catch{return!0}},Xe=async()=>{try{const{auth:t}=await pe(async()=>{const{auth:z}=await import("./index-DlXH6OO2.js").then(function(H){return H.j});return{auth:z}},__vite__mapDeps([0,1,2,3,4,5,6])),r=t.currentUser;if(!r)return;const l=await r.getIdToken(!0),j=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",s=await fetch(`${j}/api/google/oauth/start`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!s.ok)return;const _=await s.json();_.authUrl&&(sessionStorage.setItem("gmail_oauth_return",window.location.pathname),window.location.href=_.authUrl)}catch{}},We=async t=>{var q;const{auth:r}=await pe(async()=>{const{auth:L}=await import("./index-DlXH6OO2.js").then(function(te){return te.j});return{auth:L}},__vite__mapDeps([0,1,2,3,4,5,6])),l=await((q=r.currentUser)==null?void 0:q.getIdToken(!0)),j=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",s=await ke();let _=null;try{const L=localStorage.getItem("scout_fit_context");L&&(_=JSON.parse(L),console.log("[ContactSearch] Using fit context for email generation:",_))}catch(L){console.warn("[ContactSearch] Failed to parse fit context:",L)}const z=await fetch(`${j}/api/emails/generate-and-draft`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({contacts:t,resumeText:"",userProfile:s,careerInterests:(s==null?void 0:s.careerInterests)||[],fitContext:_})}),H=z.headers.get("content-type")||"",N=await z.text(),d=N?H.includes("application/json")?JSON.parse(N):{raw:N}:{};if(z.status===401){if(d!=null&&d.needsAuth&&(d!=null&&d.authUrl))return window.location.href=d.authUrl,null;throw new Error(d.error||"Gmail session expired â€” please reconnect.")}if(!z.ok)throw new Error(d.error||`HTTP ${z.status}: ${z.statusText}`);return d};a.useEffect(()=>{(async()=>{if(n)try{const r=await Ke();ye(!r)}catch{ye(!1)}})()},[n]),a.useEffect(()=>{try{const t=localStorage.getItem("scout_fit_context");if(t){const r=JSON.parse(t);ae(r)}}catch{}},[]);const Ze=(t,r,l)=>{D(t),r&&I(r),l&&x(l)};a.useEffect(()=>{},[g,m]);const _e=a.useCallback(async()=>{if(n!=null&&n.uid)try{const t=Ft(ot,"users",n.uid),r=await Dt(t);if(r.exists()){const l=r.data(),j=l.resumeUrl||null,s=l.resumeFileName||null;se(j),T(s)}}catch(t){console.error("Failed to load saved resume:",t)}},[n==null?void 0:n.uid]);a.useEffect(()=>{_e()},[_e]);const Ie=async t=>{if(!(n!=null&&n.uid))throw new Error("User not authenticated");le(!0);try{const r=new FormData;r.append("resume",t);const l=window.location.hostname==="localhost"?"http://localhost:5001":"https://www.offerloop.ai",j=ve.currentUser?await ve.currentUser.getIdToken():null,s=await fetch(`${l}/api/parse-resume`,{method:"POST",headers:j?{Authorization:`Bearer ${j}`}:{},body:r}),_=await s.json();if(!s.ok)throw new Error(_.error||"Failed to parse resume");if(!_.savedToFirebase)throw new Error("Backend failed to save resume to Firestore");se(_.resumeUrl),T(_.resumeFileName||t.name),O(t),F({title:"Resume saved",description:"Your resume has been uploaded and saved to your account."})}catch(r){const l=r instanceof Error?r.message:"Failed to save resume";throw F({title:"Upload failed",description:l,variant:"destructive"}),r}finally{le(!1)}},Qe=async t=>{var l;const r=(l=t.target.files)==null?void 0:l[0];if(r){if(r.type!=="application/pdf"){F({title:"Invalid file type",description:"Please upload a PDF file.",variant:"destructive"});return}if(r.size>10*1024*1024){F({title:"File Too Large",description:"Please upload a PDF smaller than 10MB.",variant:"destructive"});return}try{await Ie(r)}catch{}t.target.value=""}},et=t=>{t.preventDefault(),t.stopPropagation()},tt=t=>{t.preventDefault(),t.stopPropagation()},st=t=>{t.preventDefault(),t.stopPropagation()},at=async t=>{var l;t.preventDefault(),t.stopPropagation();const r=(l=t.dataTransfer.files)==null?void 0:l[0];if(r){if(r.type!=="application/pdf"){F({title:"Invalid file type",description:"Please upload a PDF file.",variant:"destructive"});return}if(r.size>10*1024*1024){F({title:"File Too Large",description:"Please upload a PDF smaller than 10MB.",variant:"destructive"});return}try{await Ie(r)}catch{}}},rt=async()=>{var l,j;if(!g.trim()||!c.trim()){F({title:"Missing Required Fields",description:"Please enter both job title and location.",variant:"destructive"});return}if(!n){F({title:"Authentication Required",description:"Please sign in to search for contacts.",variant:"destructive"}),$("/signin");return}X(!0),k(10),V(!1);let t=null;const r=()=>{let s=10;t=setInterval(()=>{s<85&&(s+=Math.random()*5+2,s=Math.min(s,85),k(Math.floor(s)))},500)};try{r();const[s,_]=await Promise.all([ke(),y?y():Promise.resolve(f.credits??0)]);if(k(20),_<15){t&&clearInterval(t),X(!1),k(0),F({title:"Insufficient Credits",description:`You have ${_} credits. You need at least 15 credits to search.`,variant:"destructive"});return}if(i==="pro"&&!h&&!G){t&&clearInterval(t),X(!1),k(0),F({title:"Resume Required",description:"Pro tier requires a resume upload for similarity matching.",variant:"destructive"});return}const z=async()=>{if(h)return h;if(G&&C){const N=await(await fetch(G)).blob();return new File([N],C,{type:"application/pdf"})}throw new Error("No resume available")};if(k(30),i==="free"||i==="elite"){const H={jobTitle:g.trim(),company:m.trim()||"",location:c.trim(),saveToDirectory:!1,userProfile:s,careerInterests:(s==null?void 0:s.careerInterests)||[],collegeAlumni:(E||"").trim(),batchSize:W};k(40);const N=await we.runFreeSearch(H);if(!v(N)){t&&clearInterval(t),k(0),F({title:"Search Failed",description:(N==null?void 0:N.error)||"Please try again.",variant:"destructive"});return}t&&clearInterval(t),k(90);const d=N.contacts.length*15,q=Math.max(0,_-d);if(S&&await S(q).catch(()=>{}),k(100),u(N.contacts),A({successful_drafts:N.successful_drafts??0,total_contacts:N.contacts.length}),k(100),V(!0),be("contact_search","search",!0,{results_count:N.contacts.length,credits_spent:d,alumni_filter:!!(E||"").trim()}),n!=null&&n.uid&&N.contacts.length>0)try{const L=$e({jobTitle:g.trim(),company:m.trim()||void 0,location:c.trim(),college:E.trim()||void 0,contactCount:N.contacts.length});await Le(n.uid,"contactSearch",L,{jobTitle:g.trim(),company:m.trim()||"",location:c.trim(),collegeAlumni:E.trim()||"",contactCount:N.contacts.length,tier:"free"})}catch{}try{await ce(N.contacts,c.trim()),F({title:"Search Complete!",description:`Found ${N.contacts.length} contacts. Used ${d} credits. ${q} credits remaining.`,duration:5e3})}catch(L){console.error("Failed to save contacts:",L),F({title:"Search Complete!",description:`Found ${N.contacts.length} contacts. Used ${d} credits.`,variant:"destructive",duration:5e3})}}else if(i==="pro"){const H=await z(),N={jobTitle:g.trim(),company:m.trim()||"",location:c.trim(),resume:H,saveToDirectory:!1,userProfile:s,careerInterests:(s==null?void 0:s.careerInterests)||[],collegeAlumni:(E||"").trim(),batchSize:W};k(40);const d=await we.runProSearch(N);if(_t(d)){t&&clearInterval(t),X(!1),k(0);const U=(l=d.error)!=null&&l.includes("Insufficient credits")?"insufficient_credits":"api_error";if(Rt("contact_search","search",U,d.error),(j=d.error)!=null&&j.includes("Insufficient credits")){F({title:"Insufficient Credits",description:d.error,variant:"destructive"}),y&&await y();return}F({title:"Search Failed",description:d.error||"Please try again.",variant:"destructive"});return}t&&clearInterval(t),k(90);const q=d.contacts.length*15,L=Math.max(0,_-q);if(S&&await S(L),u(d.contacts),A({successful_drafts:d.successful_drafts,total_contacts:d.contacts.length}),k(100),V(!0),be("contact_search","search",!0,{results_count:d.contacts.length,credits_spent:q,alumni_filter:!!(E||"").trim()}),n!=null&&n.uid&&d.contacts.length>0)try{const U=$e({jobTitle:g.trim(),company:m.trim()||void 0,location:c.trim(),college:E.trim()||void 0,contactCount:d.contacts.length});await Le(n.uid,"contactSearch",U,{jobTitle:g.trim(),company:m.trim()||"",location:c.trim(),collegeAlumni:E.trim()||"",contactCount:d.contacts.length,tier:"pro"})}catch{}const te=!!localStorage.getItem("scout_fit_context");let J=null;if(te)try{J=JSON.parse(localStorage.getItem("scout_fit_context")||"{}"),ae(J)}catch{}try{await We(d.contacts),te&&(localStorage.removeItem("scout_fit_context"),ae(null))}catch(U){if(U!=null&&U.needsAuth||U!=null&&U.require_reauth){const de=U.authUrl;if(de){window.location.href=de;return}}}try{await ce(d.contacts,c.trim());const U=te&&(J!=null&&J.job_title)?`Found ${d.contacts.length} contacts. Generated targeted emails for ${J.job_title}${J.company?` at ${J.company}`:""} using your fit analysis. Used ${q} credits. ${L} credits remaining.`:`Found ${d.contacts.length} contacts. Generated general networking emails. Used ${q} credits. ${L} credits remaining.`;F({title:te&&(J!=null&&J.job_title)?"ðŸŽ¯ Targeted Search Complete!":"Search Complete!",description:U,duration:7e3})}catch{F({title:"Search Complete!",description:`Found ${d.contacts.length} contacts. Used ${q} credits.`,variant:"destructive",duration:5e3})}}}catch(s){if(t&&clearInterval(t),s!=null&&s.needsAuth||s!=null&&s.require_reauth){const _=s.authUrl;if(_){if(F({title:"Gmail Connection Expired",description:s.message||"Please reconnect your Gmail account to create drafts.",variant:"destructive",duration:5e3}),s.contacts&&s.contacts.length>0)try{await ce(s.contacts,c.trim())}catch(z){console.error("Failed to save contacts before redirect:",z)}window.location.href=_;return}}F({title:"Search Failed",description:s instanceof Error?s.message:"Please try again.",variant:"destructive",duration:5e3}),V(!1),k(0)}finally{t&&clearInterval(t),X(!1),Q?setTimeout(()=>{k(0),V(!1)},2e3):setTimeout(()=>k(0),500)}};return e.jsx(ht,{children:e.jsxs("div",{className:"flex min-h-screen w-full bg-transparent text-foreground",children:[e.jsx(xt,{}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between border-b border-gray-100/30 px-6 bg-transparent shadow-sm relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pt,{className:"text-foreground hover:bg-secondary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Contact Search"})]}),e.jsx(It,{onJobTitleSuggestion:Ze})]}),e.jsx("main",{className:"p-8 bg-transparent",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs(ft,{value:Ye,onValueChange:xe,className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(gt,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-3 max-w-2xl w-full rounded-xl p-1 bg-white",children:[e.jsxs(fe,{value:"contact-search",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(Be,{className:"h-5 w-5 mr-2"}),"Contact Search"]}),e.jsxs(fe,{value:"contact-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(Ee,{className:"h-5 w-5 mr-2"}),"Contact Library"]}),e.jsxs(fe,{value:"import",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Import"]})]})}),e.jsxs(ge,{value:"contact-search",className:"mt-6",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:"inline-flex rounded-lg border border-border bg-muted p-1",children:[e.jsx("button",{onClick:()=>Se("traditional"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${oe==="traditional"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Traditional Search"}),e.jsxs("button",{onClick:()=>i==="elite"?Se("prompt"):null,className:`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${oe==="prompt"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"} ${i!=="elite"?"opacity-70 cursor-not-allowed":""}`,title:i!=="elite"?"Upgrade to Elite to unlock Prompt Search":"",children:["Prompt Search",i!=="elite"&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] font-semibold bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded",children:"ELITE"})]})]})}),oe==="prompt"&&e.jsx("div",{className:"mb-6",children:i==="elite"?e.jsx(Wt,{onSearchComplete:(t,r)=>{u(t),V(!0),k(100),X(!1);const l=(r==null?void 0:r.location)||"";ce(t,l);const j=t.length*15;be("contact_search","search",!0,{results_count:t.length,credits_spent:j,alumni_filter:!!((r==null?void 0:r.school)||"").trim()})},onSearchStart:()=>{X(!0),V(!1),u([]),k(0)},userTier:i,userCredits:f.credits??0}):e.jsx("div",{className:"p-8 rounded-xl border border-purple-500/30 bg-gradient-to-br from-purple-500/5 to-indigo-500/5",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-purple-500/20 to-indigo-500/20 mb-2",children:e.jsx("span",{className:"text-3xl",children:"âœ¨"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Prompt Search is an Elite Feature"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Describe who you want to reach in natural language - our AI parses your prompt and finds the perfect contacts automatically."}),e.jsx("button",{onClick:()=>$("/pricing"),className:"mt-4 px-6 py-3 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-medium hover:from-purple-600 hover:to-indigo-600 transition-all",children:"Upgrade to Elite"})]})})}),oe==="traditional"&&e.jsxs(e.Fragment,{children:[K&&K.job_title&&e.jsx(re,{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-lg",children:"ðŸŽ¯"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Targeted Email Generation Active"}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Emails will be tailored for ",e.jsx("strong",{children:K.job_title}),K.company?` at ${K.company}`:"",K.score?` (${K.score}% fit match)`:""]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Includes your strengths, talking points, and role-specific insights"})]})]}),e.jsx(M,{onClick:()=>{localStorage.removeItem("scout_fit_context"),ae(null),F({title:"Fit context cleared",description:"Emails will now use general networking format"})},variant:"outline",size:"sm",className:"bg-white border-blue-300 text-blue-700 hover:bg-blue-50",children:"Clear"})]})})}),e.jsx(re,{className:"mb-6 bg-white border-border",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${ee?"bg-blue-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:ee?"Gmail Connected":"Gmail Not Connected"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ee?"Email drafts will be created in your Gmail":"Connect Gmail to create email drafts automatically"})]})]}),e.jsx(M,{onClick:()=>Xe(),variant:ee?"outline":"default",size:"sm",className:ee?"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50":" text-white shadow-sm",style:ee?void 0:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:ee?"Reconnect":"Connect Gmail"})]})})}),e.jsxs(re,{className:"bg-white border-border",children:[e.jsx(Ve,{className:"border-b border-border",children:e.jsxs(qe,{className:"text-xl text-foreground",children:["Professional Search Filters",e.jsx("span",{className:"text-sm text-muted-foreground",children:"- I want to network with..."})]})}),e.jsxs(ne,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-foreground",children:["Job Title ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(me,{value:g,onChange:D,placeholder:"e.g. Analyst, unsure of exact title in company? Ask Scout",dataType:"job_title",disabled:P,className:"bg-white border-input text-foreground placeholder:text-muted-foreground focus:border-purple-500 hover:border-purple-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Company"}),e.jsx(me,{value:m,onChange:I,placeholder:"e.g. Google, Meta, or any preferred firm",dataType:"company",disabled:P,className:"bg-white border-input text-foreground placeholder:text-muted-foreground focus:border-purple-500 hover:border-purple-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-foreground",children:["Location ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(me,{value:c,onChange:x,placeholder:"e.g. Los Angeles, CA, New York, NY, city of office",dataType:"location",disabled:P,className:"bg-white border-input text-foreground placeholder:text-muted-foreground focus:border-purple-500 hover:border-purple-400 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"College Alumni"}),e.jsx(me,{value:E,onChange:b,placeholder:"e.g. Stanford, USC, preferred college they attended",dataType:"school",disabled:P,className:"bg-white border-input text-foreground placeholder:text-muted-foreground focus:border-purple-500 hover:border-purple-400 transition-colors"})]})]}),e.jsxs("div",{className:"col-span-1 lg:col-span-2 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Email Batch Size"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"- Choose how many contacts to generate per search"})]}),e.jsx("div",{className:"bg-muted/30 rounded-xl p-4 sm:p-6 border border-border shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-blue-400/40 rounded-xl px-4 py-3 min-w-[60px] sm:min-w-[70px] text-center shadow-inner",children:e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent",children:W})}),e.jsx("div",{className:"flex-1 w-full sm:max-w-[320px] pt-2 sm:pt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"range",min:"1",max:Y,value:W,onChange:t=>Ne(Number(t.target.value)),disabled:P||Y<1,className:`w-full h-3 bg-gray-700/50 rounded-full appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed 
                                    [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-7 [&::-webkit-slider-thumb]:h-7 
                                    [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white
                                    [&::-webkit-slider-thumb]:shadow-[0_0_20px_rgba(59,130,246,0.6)] 
                                    [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-blue-400
                                    [&::-webkit-slider-thumb]:hover:shadow-[0_0_25px_rgba(59,130,246,0.8)] 
                                    [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200
                                    [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:w-7 [&::-moz-range-thumb]:h-7 
                                    [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-white
                                    [&::-moz-range-thumb]:shadow-[0_0_20px_rgba(59,130,246,0.6)] 
                                    [&::-moz-range-thumb]:border-2 [&::-moz-range-thumb]:border-blue-400`,style:{background:`linear-gradient(to right, 
                                      rgba(59, 130, 246, 0.8) 0%, 
                                      rgba(96, 165, 250, 0.8) ${(W-1)/(Y-1)*100}%, 
                                      rgba(55, 65, 81, 0.3) ${(W-1)/(Y-1)*100}%, 
                                      rgba(55, 65, 81, 0.3) 100%)`}}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-3 font-medium",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:Y})]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-xl px-4 py-3 min-w-[80px] sm:min-w-[100px] w-full sm:w-auto border border-blue-400/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xl font-bold text-blue-600",children:W*15}),e.jsx("span",{className:"text-sm text-blue-600/70 ml-2",children:"credits"})]})})]})}),Y<(i==="free"?3:i==="pro"?8:15)&&e.jsx("div",{className:"mt-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-700 flex items-start gap-2",children:[e.jsx("span",{children:"Warning"}),e.jsxs("span",{children:["Limited by available credits. Maximum: ",Y," contacts."]})]})})]}),(i==="free"||i==="pro"||i==="elite")&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-foreground",children:["Resume ",i==="pro"&&e.jsx("span",{className:"text-destructive",children:"*"}),i==="pro"&&" (Required for Pro tier AI similarity matching)",i!=="pro"&&" (Optional - helps with personalized matching)"]}),G&&C?e.jsx("div",{className:"border-2 border-dashed border-green-500/50 rounded-lg p-4 bg-green-500/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:C}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resume saved to your account"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=document.getElementById("resume-upload");t==null||t.click()},disabled:P||Z,children:Z?"Uploading...":"Change"})})]})}):e.jsxs("div",{className:"border-2 border-dashed border-input rounded-lg p-6 text-center hover:border-purple-400 transition-colors bg-muted/30 cursor-pointer",onDragOver:et,onDragEnter:tt,onDragLeave:st,onDrop:at,onClick:()=>{if(!P&&!Z){const t=document.getElementById("resume-upload");t==null||t.click()}},children:[e.jsx("input",{type:"file",accept:".pdf",onChange:Qe,className:"hidden",id:"resume-upload",disabled:P||Z}),e.jsxs("div",{className:`${P||Z?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(he,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-foreground mb-1 font-medium",children:Z?"Uploading resume...":"Drag and drop your resume here, or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF only, max 10MB"})]})]})]}),e.jsxs("div",{className:"space-y-4 mt-8",children:[e.jsx(M,{onClick:rt,disabled:!g.trim()||!c.trim()||P||i==="pro"&&!h&&!G||(f.credits??0)<15,size:"lg",className:" text-white font-medium px-8 transition-all hover:scale-105 shadow-sm",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:P?"Searching...":"Find Contacts"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsxs("span",{children:["Up to ",Ce.maxContacts," contacts + emails"]})]}),e.jsx("span",{className:"text-muted-foreground",children:"â€¢"}),e.jsx("span",{children:"Auto-saved to Contact Library"})]})]}),(P||Q)&&e.jsx(re,{className:"mt-6 bg-white border-border",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-foreground",children:Q?e.jsx("span",{className:"text-green-600 font-semibold",children:"Search completed successfully!"}):`Searching with ${Ce.name} tier...`}),e.jsxs("span",{className:Q?"text-green-600 font-bold":"text-primary",children:[ie,"%"]})]}),e.jsx(Je,{value:ie,className:"h-2"}),Q&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:"Check your Contact Library to view and manage your new contacts."})]})})}),P&&!R&&e.jsx(re,{className:"mt-6 bg-white border-border",children:e.jsx(ne,{className:"p-6",children:e.jsx(lt,{variant:"contacts",count:3})})}),Q&&o.length===0&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-2 border-yellow-500/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"text-base font-semibold text-yellow-700",children:"No Contacts Found"})}),e.jsxs("div",{className:"text-sm text-yellow-700 mt-2",children:[e.jsx("p",{className:"mb-2",children:"The search criteria may be too restrictive. Try:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:'Using a broader job title (e.g., "analyst" instead of "investment banking analyst")'}),e.jsx("li",{children:"Removing the company filter"}),e.jsx("li",{children:"Using a broader location (e.g., just the state instead of city)"}),e.jsx("li",{children:"Removing the school filter if searching for alumni"})]}),oe==="prompt"&&e.jsx("p",{className:"mt-3 text-xs text-yellow-600",children:"ðŸ’¡ Tip: Edit the filters in the confirmation screen to make them less specific"})]})]}),R&&w&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-500/10 to-blue-500/10 border-2 border-green-500/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"text-base font-semibold text-green-700",children:"Search Completed Successfully!"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),e.jsx("div",{className:"text-xs text-blue-600/70",children:"Contacts Found"})]}),e.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),e.jsx("div",{className:"text-xs text-blue-600/70",children:"Email Drafts"})]})]}),e.jsxs("div",{className:"text-sm text-blue-700 mt-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"Saved"}),"All contacts saved to your Contact Library"]}),e.jsx("button",{onClick:()=>xe("contact-library"),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 underline",children:"View in Contact Library"})]})]})]})]})]}),e.jsx(ge,{value:"contact-library",className:"mt-6",children:e.jsx(bt,{})}),e.jsx(ge,{value:"import",className:"mt-6",children:e.jsx("div",{className:"bg-white border border-border rounded-xl p-6",children:e.jsx(Qt,{onImportComplete:()=>{xe("contact-library")}})})})]})})})]})]})})};export{js as default};
