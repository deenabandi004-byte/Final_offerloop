import{j as e}from"./vendor-ui-Dvm6rNa4.js";import{r as a,u as ke}from"./vendor-react-BYoYq924.js";import{B as de,b as Ce,S as Se,A as Fe,a as Le}from"./AppSidebar-Cn2aJ38A.js";import{T as $e,a as Ie,b as ue,c as me}from"./tabs-B3Jp1R5J.js";import{c as _,L as ze,B as G,a as Ee,x as ee,t as T}from"./index-BlHBLROI.js";import{C as R,c as W,b as Ae}from"./card-BhhoFDdW.js";import{a as X,D as Te}from"./api-BaCf4yf7.js";import{I as Pe}from"./input-XODqQdub.js";import{S as pe}from"./search-BYePgFCK.js";import{M as _e}from"./map-pin-ChQYAUwW.js";import{U as De}from"./users-D50U-cKK.js";import{L as J}from"./loader-circle-Dc92CH8W.js";import{T as Be}from"./trash-2-CokCcdpM.js";import{C as qe}from"./chevron-up-BYoRZa6c.js";import{C as He}from"./chevron-down-BYs8h_N4.js";import{P as Me}from"./PageHeaderActions-DBb3HQNj.js";import"./avatar-Dzw8yNMj.js";import"./user-C_wegfzu.js";import"./briefcase-dTGXHmKy.js";import"./credit-card-CUtRkOcf.js";import"./settings-DRsa6wdQ.js";import"./zap-4xeOdT8m.js";import"./external-link-CNjLoQl2.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ve=_("arrow-up",Re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ke=_("circle-alert",Ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Oe=_("globe",Ye);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],xe=_("history",Qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]],he=_("sheet",We);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]],Ge=_("user-search",Xe);function Je({firms:S,onViewContacts:g,onDelete:f,deletingId:j}){const[F,D]=a.useState("employeeCount"),[b,B]=a.useState("desc"),[c,P]=a.useState(""),[m,V]=a.useState(S);a.useEffect(()=>{if(!c.trim()){V(S);return}const t=S.filter(n=>{var y,L,v,$,I,w,E,z,x,Y,O,k;const l=c.toLowerCase();return((y=n.name)==null?void 0:y.toLowerCase().includes(l))||((L=n.industry)==null?void 0:L.toLowerCase().includes(l))||(($=(v=n.location)==null?void 0:v.display)==null?void 0:$.toLowerCase().includes(l))||((w=(I=n.location)==null?void 0:I.city)==null?void 0:w.toLowerCase().includes(l))||((z=(E=n.location)==null?void 0:E.state)==null?void 0:z.toLowerCase().includes(l))||((Y=(x=n.location)==null?void 0:x.country)==null?void 0:Y.toLowerCase().includes(l))||((O=n.website)==null?void 0:O.toLowerCase().includes(l))||((k=n.founded)==null?void 0:k.toString().includes(c))});V(t)},[c,S]);const q=[...m].sort((t,n)=>{var L,v,$,I,w,E,z,x;let l,y;switch(F){case"name":l=((L=t.name)==null?void 0:L.toLowerCase())||"",y=((v=n.name)==null?void 0:v.toLowerCase())||"";break;case"location":l=((I=($=t.location)==null?void 0:$.display)==null?void 0:I.toLowerCase())||"",y=((E=(w=n.location)==null?void 0:w.display)==null?void 0:E.toLowerCase())||"";break;case"industry":l=((z=t.industry)==null?void 0:z.toLowerCase())||"",y=((x=n.industry)==null?void 0:x.toLowerCase())||"";break;case"employeeCount":l=t.employeeCount||0,y=n.employeeCount||0;break;case"founded":l=t.founded||0,y=n.founded||0;break;default:return 0}return l<y?b==="asc"?-1:1:l>y?b==="asc"?1:-1:0}),h=t=>{F===t?B(b==="asc"?"desc":"asc"):(D(t),B("desc"))},N=({field:t})=>F!==t?null:b==="asc"?e.jsx(qe,{className:"h-4 w-4 inline-block ml-1"}):e.jsx(He,{className:"h-4 w-4 inline-block ml-1"}),U=t=>{var n;return t.id||`${t.name}-${(n=t.location)==null?void 0:n.display}`},K=t=>t.employeeCount?t.employeeCount>=1e3?`${(t.employeeCount/1e3).toFixed(1)}k`:t.employeeCount.toLocaleString():t.sizeBucket?{small:"1-50",mid:"51-500",large:"500+"}[t.sizeBucket]||t.sizeBucket:"â€”";return e.jsxs("div",{className:"bg-card backdrop-blur-sm rounded-xl shadow-sm border border-border overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-border bg-muted",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-blue-400"}),e.jsxs("span",{className:"font-medium text-foreground",children:[m.length," ",m.length===1?"firm":"firms",c&&` (filtered from ${S.length})`]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "View Contacts" to find professionals at any firm'})]})}),e.jsx("div",{className:"px-6 py-4 border-b border-border bg-background",children:e.jsxs("div",{className:"relative w-80",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Pe,{type:"text",placeholder:"Search firms...",value:c,onChange:t=>P(t.target.value),className:"pl-10 bg-muted border-border text-foreground placeholder-muted-foreground focus:border-primary focus:ring-primary"})]})}),m.length===0&&S.length>0&&c&&e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"No firms match your search."}),e.jsx("button",{onClick:()=>P(""),className:"text-sm text-blue-400 hover:text-blue-300 underline",children:"Clear search"})]}),m.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>h("name"),children:["Company Name",e.jsx(N,{field:"name"})]}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Website"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"LinkedIn"}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>h("location"),children:["Location",e.jsx(N,{field:"location"})]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>h("industry"),children:["Industry",e.jsx(N,{field:"industry"})]}),e.jsxs("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>h("employeeCount"),children:["Employees",e.jsx(N,{field:"employeeCount"})]}),e.jsxs("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-secondary transition-colors",onClick:()=>h("founded"),children:["Founded",e.jsx(N,{field:"founded"})]}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-background divide-y divide-border",children:q.map((t,n)=>{var l;return e.jsxs("tr",{className:"hover:bg-secondary transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-500/20 rounded-lg flex items-center justify-center border border-blue-500/30",children:e.jsx(de,{className:"h-5 w-5 text-blue-400"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-foreground",children:t.name})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:t.website?e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:t.website,children:e.jsx(Oe,{className:"h-5 w-5"})}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:t.linkedinUrl?e.jsx("a",{href:t.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center p-2 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:"View on LinkedIn",children:e.jsx(ze,{className:"h-5 w-5"})}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[e.jsx(_e,{className:"h-4 w-4 text-muted-foreground mr-1.5 flex-shrink-0"}),e.jsx("span",{children:((l=t.location)==null?void 0:l.display)||"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300 border border-blue-500/30 capitalize",children:t.industry||"â€”"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-foreground",children:[e.jsx(De,{className:"h-4 w-4 text-muted-foreground mr-1.5"}),e.jsx("span",{children:K(t)})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-foreground",children:[e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground mr-1.5"}),e.jsx("span",{children:t.founded||"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>g(t),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-300 bg-blue-500/20 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 hover:text-blue-200 transition-colors",children:[e.jsx(Ge,{className:"h-4 w-4 mr-1.5"}),"View Contacts"]}),f&&e.jsx(G,{size:"sm",variant:"ghost",className:"text-red-300 hover:text-red-200 hover:bg-red-500/10",disabled:j===U(t),onClick:()=>f(t),children:j===U(t)?e.jsx(J,{className:"h-4 w-4 animate-spin"}):e.jsx(Be,{className:"h-4 w-4"})})]})})]},t.id||n)})})]})}),m.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-border bg-muted",children:e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:'Click on column headers to sort â€¢ Click "View Contacts" to find professionals at any firm'})})]})}const Ze=["Investment banks in New York focused on healthcare M&A","Mid-sized consulting firms in San Francisco","Venture capital firms in Boston focused on biotech","Large private equity firms in Chicago","Software companies in Austin with 50-200 employees"],ks=()=>{var te;const S=ke(),{user:g,checkCredits:f}=Ee(),j=g||{credits:0,tier:"free"},[F,D]=a.useState(""),[b,B]=a.useState(!1),[c,P]=a.useState([]),[m,V]=a.useState(null),[q,h]=a.useState(null),[N,U]=a.useState(!1),[K,t]=a.useState(!1),[n,l]=a.useState([]),[y,L]=a.useState(!1),[v,$]=a.useState("firm-search"),[I,w]=a.useState(!0),[E,z]=a.useState(null),[x,Y]=a.useState(10),[O]=a.useState([5,10,20,40]),[k]=a.useState(5);a.useEffect(()=>{f&&g&&f()},[x,f,g]);const Q=a.useCallback(async()=>{if(!g){w(!1);return}w(!0);try{console.log("ðŸ“¥ Loading all saved firms from Firebase...");const s=await X.getFirmSearchHistory(50),o=[],r=new Set;for(const d of s)try{const p=await X.getFirmSearchById(d.id);p&&p.firms&&p.firms.forEach(i=>{var u;const C=i.id||`${i.name}-${(u=i.location)==null?void 0:u.display}`;r.has(C)||(r.add(C),o.push(i))})}catch(p){console.error(`Failed to load search ${d.id}:`,p)}console.log(`âœ… Loaded ${o.length} unique firms from Firebase`),P(o)}catch(s){console.error("âŒ Failed to load saved firms:",s)}finally{w(!1)}},[g]),Z=a.useCallback(async()=>{if(g){L(!0);try{const s=await X.getFirmSearchHistory(10);l(s)}catch(s){console.error("Failed to load search history:",s)}finally{L(!1)}}},[g]);a.useEffect(()=>{Q(),Z(),f&&f()},[Q,Z,f]),a.useEffect(()=>{v==="firm-library"&&g&&Q()},[v,g,Q]);const H=async s=>{const o=s||F;if(!o.trim()){h("Please enter a search query");return}B(!0),h(null),U(!0);try{const r=await X.searchFirms(o,x);if(r.success){if(V(r.parsedFilters),r.firms.length===0)h("No firms found matching your criteria. Try broadening your search or adjusting the location/industry.");else{const d=new Set(c.map(i=>{var C;return i.id||`${i.name}-${(C=i.location)==null?void 0:C.display}`})),p=r.firms.filter(i=>{var u;const C=i.id||`${i.name}-${(u=i.location)==null?void 0:u.display}`;return!d.has(C)});P(i=>[...p,...i]),T({title:"Search Complete!",description:`Found ${r.firms.length} firms. Used ${r.creditsCharged||0} credits.`}),f&&await f(),$("firm-library")}Z()}else r.insufficientCredits?(h(r.error||"Insufficient credits"),T({title:"Insufficient Credits",description:`You need ${r.creditsNeeded} credits but only have ${r.currentCredits}. Please upgrade your plan or reduce batch size.`,variant:"destructive"})):h(r.error||"Search failed. Please try again.")}catch(r){if(console.error("Search error:",r),r.status===402||r.error_code==="INSUFFICIENT_CREDITS"){const d=r.creditsNeeded||r.required||x*k,p=r.currentCredits||r.available||j.credits||0;h(`Insufficient credits. You need ${d} credits but only have ${p}.`),T({title:"Insufficient Credits",description:`You need ${d} credits but only have ${p}. Please upgrade your plan or reduce batch size.`,variant:"destructive"}),f&&await f()}else if(r.status===502||r.error_code==="EXTERNAL_API_ERROR"){const d=r.message||"The search service is temporarily unavailable. Please try again in a few minutes.";h(d),T({title:"Service Temporarily Unavailable",description:d,variant:"destructive"})}else h(r.message||"An unexpected error occurred. Please try again."),T({title:"Search Failed",description:r.message||"An error occurred. Please try again.",variant:"destructive"})}finally{B(!1)}},fe=s=>{var r,d;const o=new URLSearchParams;if(o.set("company",s.name),(r=s.location)!=null&&r.display)o.set("location",s.location.display);else if((d=s.location)!=null&&d.city){const p=[s.location.city,s.location.state,s.location.country].filter(Boolean);o.set("location",p.join(", "))}S(`/contact-search?${o.toString()}`)},se=s=>{var o;return s.id||`${s.name}-${(o=s.location)==null?void 0:o.display}`},be=async s=>{const o=se(s);z(o);try{P(r=>r.filter(d=>se(d)!==o)),T({title:"Firm deleted",description:"Removed from your Firm Library."})}catch(r){T({title:"Delete failed",description:r instanceof Error?r.message:"Please try again.",variant:"destructive"})}finally{z(null)}},ye=s=>{D(s.query),t(!1),H(s.query)},ge=s=>{D(s),H(s)},je=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),H())},Ne=()=>{if(!c||c.length===0)return;const o=["Company Name","Website","LinkedIn","Location","Industry","Employees","Founded"].join(","),r=c.map(u=>{var re,ae,ne,oe,ie,ce;const A=le=>{if(!le)return"";const M=String(le);return M.includes(",")||M.includes('"')||M.includes(`
`)?`"${M.replace(/"/g,'""')}"`:M},we=((re=u.location)==null?void 0:re.display)||[(ae=u.location)==null?void 0:ae.city,(ne=u.location)==null?void 0:ne.state,(oe=u.location)==null?void 0:oe.country].filter(Boolean).join(", ");return[A(u.name),A(u.website),A(u.linkedinUrl),A(we),A(u.industry),A((ie=u.employeeCount)==null?void 0:ie.toString()),A((ce=u.founded)==null?void 0:ce.toString())].join(",")}),d=[o,...r].join(`
`),p=new Blob([d],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),C=URL.createObjectURL(p);i.setAttribute("href",C),i.setAttribute("download",`firms_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},ve=((j==null?void 0:j.tier)==="pro"?"pro":"free")==="free"?10:40;return e.jsx(Se,{className:"bg-transparent",children:e.jsxs("div",{className:"flex min-h-screen w-full bg-transparent text-foreground",children:[e.jsx(Fe,{}),e.jsxs("div",{className:"flex-1 bg-transparent",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between border-b border-gray-100/30 px-6 bg-transparent shadow-sm relative z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Le,{className:"text-foreground hover:bg-secondary"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Firm Search"})]}),e.jsx(Me,{})]}),e.jsx("main",{className:"p-8 bg-transparent",children:e.jsx("div",{className:"max-w-7xl mx-auto bg-transparent",children:e.jsxs($e,{value:v,onValueChange:$,className:"w-full bg-transparent",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(Ie,{className:"h-14 tabs-container-gradient border border-border grid grid-cols-2 max-w-lg w-full rounded-xl p-1 bg-white",children:[e.jsxs(ue,{value:"firm-search",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(pe,{className:"h-5 w-5 mr-2"}),"Firm Search"]}),e.jsxs(ue,{value:"firm-library",className:"h-12 font-medium text-base data-[state=active] data-[state=active]:text-white data-[state=inactive]:text-muted-foreground transition-all",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Firm Library (",c.length,")"]})]})}),e.jsx(me,{value:"firm-search",className:"bg-transparent",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsx(R,{className:"bg-white border-border shadow-sm rounded-2xl",children:e.jsxs(W,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Firm Search"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discover companies that match your career interests."})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ae,{className:"text-xl text-foreground",children:"Describe the firms you're looking for"}),e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>t(!K),className:"border-input text-foreground hover:bg-secondary",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"History"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:F,onChange:s=>D(s.target.value),onKeyDown:je,placeholder:"e.g., Mid-sized investment banks in New York focused on healthcare M&A...",rows:4,className:"min-h-[120px] w-full rounded-xl bg-white border border-input px-4 py-3 text-sm text-foreground placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:border-transparent resize-none disabled:opacity-50",disabled:b}),e.jsx("button",{onClick:()=>H(),disabled:b||!F.trim(),className:"absolute bottom-3 right-3 p-2 bg-primary rounded-full hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:b?e.jsx(J,{className:"h-5 w-5 animate-spin text-white"}):e.jsx(Ve,{className:"h-5 w-5 text-white"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Include ",e.jsx("span",{className:"text-destructive",children:"*industry*"})," (required), ",e.jsx("span",{className:"text-destructive",children:"*location*"})," (required), and optionally size, focus areas, and any key words you want for best results."]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Firm Batch Size"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how many firms to pull per search."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/50 p-1 border border-input",children:O.map(s=>e.jsx("button",{type:"button",onClick:()=>Y(s),disabled:b||s>ve,className:`px-3 py-1.5 text-xs font-medium rounded-full transition ${x===s?"text-white":"text-muted-foreground hover:text-foreground"} disabled:opacity-50 disabled:cursor-not-allowed`,style:x===s?{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"}:void 0,children:s},s))}),e.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[e.jsxs("div",{className:"font-medium text-foreground",children:[x*k," credits"]}),e.jsxs("div",{className:"text-[11px] text-muted-foreground",children:[k," credits per firm"]})]})]})]}),j.credits!==void 0&&j.credits<x*k&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-red-400 flex items-start gap-2",children:[e.jsx("span",{children:"âš ï¸ Warning:"}),e.jsxs("span",{children:["Insufficient credits. You need ",x*k," credits but only have ",j.credits,"."]})]})}),e.jsx(G,{onClick:()=>H(),disabled:b||!F.trim()||(j.credits??0)<x*k,className:"w-full h-12 text-white font-semibold",style:{background:"linear-gradient(135deg, #3B82F6, #60A5FA)"},children:b?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Searching..."]}):"Search Firms"})]}),!N&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Examples you can try"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click an example to fill in the search description."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ze.map((s,o)=>e.jsx("button",{type:"button",onClick:()=>ge(s),className:"whitespace-nowrap rounded-full border border-border bg-white px-3 py-1.5 text-xs text-foreground hover:bg-secondary hover:text-foreground transition-colors",children:s},o))})]})]})}),q&&e.jsxs("div",{className:"p-4 bg-red-900/30 border border-red-500/50 rounded-lg flex items-start space-x-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-red-200",children:q})})]}),m&&N&&!q&&e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-500/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-medium",children:"Searching for:"})," ",m.size&&m.size!=="none"&&e.jsxs("span",{className:"capitalize",children:[m.size,"-sized "]}),e.jsx("span",{className:"capitalize",children:m.industry})," firms in"," ",e.jsx("span",{children:m.location}),((te=m.keywords)==null?void 0:te.length)>0&&e.jsxs("span",{children:[" focused on ",m.keywords.join(", ")]})]})}),b&&e.jsx(R,{className:"bg-white border-border",children:e.jsx(W,{className:"p-6",children:e.jsx(ee,{variant:"card",count:3})})}),N&&!b&&c.length>0&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-600",children:[e.jsxs("span",{className:"font-medium",children:["âœ“ Found ",c.length," firms!"]}),' Switch to the "Firm Library" tab to view results and export to CSV.']})})]})}),e.jsx(me,{value:"firm-library",className:"!bg-white",children:I?e.jsx(R,{className:"bg-white border-border",children:e.jsx(W,{className:"p-6",children:e.jsx(ee,{variant:"card",count:5})})}):e.jsxs("div",{className:"space-y-4",children:[c.length>0&&e.jsxs("div",{className:"flex justify-between items-center bg-white rounded-lg border border-border p-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:[c.length," firm",c.length!==1?"s":""," saved"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Export your results to CSV for further analysis"})]}),e.jsxs(G,{onClick:Ne,className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Te,{className:"h-4 w-4"}),"Export CSV"]})]}),I?e.jsx(R,{className:"bg-white border-border",children:e.jsx(W,{className:"p-6",children:e.jsx(ee,{variant:"card",count:5})})}):c.length>0?e.jsx(Je,{firms:c,onViewContacts:fe,onDelete:be,deletingId:E}):e.jsxs(R,{className:"bg-white border-border p-12 text-center",children:[e.jsx(he,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-foreground mb-2",children:"No firms to display yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Switch to the "Firm Search" tab to find companies'})]})]})})]})})})]}),K&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-xl border-l border-border z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Search History"}),e.jsx("button",{onClick:()=>t(!1),className:"p-2 text-muted-foreground hover:text-foreground rounded-lg hover:bg-secondary",children:"âœ•"})]}),e.jsx("div",{className:"overflow-y-auto h-full pb-20",children:y?e.jsx("div",{className:"p-8 text-center",children:e.jsx(J,{className:"h-6 w-6 text-muted-foreground animate-spin mx-auto"})}):n.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(xe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No search history yet"})]}):e.jsx("div",{className:"divide-y divide-border",children:n.map(s=>e.jsxs("button",{onClick:()=>ye(s),className:"w-full p-4 text-left hover:bg-secondary transition-colors",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-2",children:s.query}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.resultsCount," firms found"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]})]},s.id))})})]}),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>t(!1)})]})]})})};export{ks as default};
